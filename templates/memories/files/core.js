KISSY.add("ua/base",function(){var a=navigator.userAgent,b="",c="mobile",d=b,e=b,f,g=[6,9],h,i,j="{{version}}",k="<!--[if IE "+j+"]><s></s><![endif]-->",l=document.createElement("div"),m,n={},o=function(a){var b=0;return parseFloat(a.replace(/\./g,function(){return b++===0?".":""}))};l.innerHTML=k.replace(j,""),m=l.getElementsByTagName("s");if(m.length>0){e="ie",n[d="trident"]=.1,(f=a.match(/Trident\/([\d.]*)/))&&f[1]&&(n[d]=o(f[1]));for(h=g[0],i=g[1];h<=i;h++){l.innerHTML=k.replace(j,h);if(m.length>0){n[e]=h;break}}}else if((f=a.match(/AppleWebKit\/([\d.]*)/))&&f[1]){n[d="webkit"]=o(f[1]),(f=a.match(/Chrome\/([\d.]*)/))&&f[1]?n[e="chrome"]=o(f[1]):(f=a.match(/\/([\d.]*) Safari/))&&f[1]&&(n[e="safari"]=o(f[1]));if(/ Mobile\//.test(a))n[c]="apple";else if(f=a.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/))n[c]=f[0].toLowerCase()}else if((f=a.match(/Presto\/([\d.]*)/))&&f[1])n[d="presto"]=o(f[1]),(f=a.match(/Opera\/([\d.]*)/))&&f[1]&&(n[e="opera"]=o(f[1]),(f=a.match(/Opera\/.* Version\/([\d.]*)/))&&f[1]&&(n[e]=o(f[1])),(f=a.match(/Opera Mini[^;]*/))&&f?n[c]=f[0].toLowerCase():(f=a.match(/Opera Mobi[^;]*/))&&f&&(n[c]=f[0]));else if((f=a.match(/MSIE\s([^;]*)/))&&f[1])n[d="trident"]=.1,n[e="ie"]=o(f[1]),(f=a.match(/Trident\/([\d.]*)/))&&f[1]&&(n[d]=o(f[1]));else if(f=a.match(/Gecko/))n[d="gecko"]=.1,(f=a.match(/rv:([\d.]*)/))&&f[1]&&(n[d]=o(f[1])),(f=a.match(/Firefox\/([\d.]*)/))&&f[1]&&(n[e="firefox"]=o(f[1]));return n.core=d,n.shell=e,n._numberify=o,n}),KISSY.add("ua/extra",function(a,b){var c=navigator.userAgent,d,e,f,g={},h=b._numberify;if(d=c.match(/360SE/))g[f="se360"]=3;else if((d=c.match(/Maxthon/))&&(e=window.external)){f="maxthon";try{g[f]=h(e.max_version)}catch(i){g[f]=.1}}else if(d=c.match(/TencentTraveler\s([\d.]*)/))g[f="tt"]=d[1]?h(d[1]):.1;else if(d=c.match(/TheWorld/))g[f="theworld"]=3;else if(d=c.match(/SE\s([\d.]*)/))g[f="sougou"]=d[1]?h(d[1]):.1;return f&&(g.shell=f),a.mix(b,g),b},{requires:["ua/base"]}),KISSY.add("ua",function(a,b){return b},{requires:["ua/extra"]}),KISSY.add("dom/base",function(a,b,c){function d(a,b){return a&&a.nodeType===b}var e={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12},f={_isCustomDomain:function(a){a=a||window;var b=a.document.domain,c=a.location.hostname;return b!=c&&b!="["+c+"]"},_genEmptyIframeSrc:function(a){a=a||window;if(b.ie&&f._isCustomDomain(a))return"javascript:void(function(){"+encodeURIComponent("document.open();document.domain='"+a.document.domain+"';"+"document.close();")+"}())"},_NODE_TYPE:e,_isElementNode:function(a){return d(a,f.ELEMENT_NODE)},_getWin:function(a){return a&&"scrollTo"in a&&a.document?a:d(a,f.DOCUMENT_NODE)?a.defaultView||a.parentWindow:a===c||a===null?window:!1},_nodeTypeIs:d,_isNodeList:function(a){return a&&!a.nodeType&&a.item&&!a.setTimeout},_nodeName:function(a,b){return a&&a.nodeName.toLowerCase()===b.toLowerCase()}};return a.mix(f,e),f},{requires:["ua"]}),KISSY.add("dom/attr",function(a,b,c,d){function y(a){return b._nodeTypeIs(a,b.TEXT_NODE)}function z(a,b){b=t[b]||b;var c=v[b];return c&&c.get?c.get(a,b):a[b]}var e=document,f=e.documentElement,g=!f.hasAttribute,h=f.textContent===d?"innerText":"textContent",i="",j=b._nodeName,k=b._isElementNode,l=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,m=/^(?:button|input|object|select|textarea)$/i,n=/^a(?:rea)?$/i,o=/:|^on/,p=/\r/g,q={},r={val:1,css:1,html:1,text:1,data:1,width:1,height:1,offset:1,scrollTop:1,scrollLeft:1},s={tabindex:{get:function(a){var b=a.getAttributeNode("tabindex");return b&&b.specified?parseInt(b.value,10):m.test(a.nodeName)||n.test(a.nodeName)&&a.href?0:d}},style:{get:function(a){return a.style.cssText},set:function(a,b){a.style.cssText=b}}},t={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},u={get:function(a,c){return b.prop(a,c)?c.toLowerCase():d},set:function(a,c,d){var e;return c===!1?b.removeAttr(a,d):(e=t[d]||d,e in a&&(a[e]=!0),a.setAttribute(d,d.toLowerCase())),d}},v={},w={},x={option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var c=a.selectedIndex,d=a.options,e=a.type==="select-one";if(c<0)return null;if(e)return b.val(d[c]);var f=[],g=0,h=d.length;for(;g<h;++g)d[g].selected&&f.push(b.val(d[g]));return f},set:function(c,d){var e=a.makeArray(d),f=c.options;return a.each(f,function(c){c.selected=a.inArray(b.val(c),e)}),e.length||(c.selectedIndex=-1),e}}};return g&&(w={get:function(a,b){var c;return c=a.getAttributeNode(b),c&&c.nodeValue!==""?c.nodeValue:d},set:function(a,b,c){var d=a.getAttributeNode(c);if(d)d.nodeValue=b;else try{var e=a.ownerDocument.createAttribute(c);e.value=b,a.setAttributeNode(e)}catch(f){return a.setAttribute(c,b,0)}}},q=t,s.tabIndex=s.tabindex,a.each(["href","src","width","height","colSpan","rowSpan"],function(a){s[a]={get:function(b){var c=b.getAttribute(a,2);return c===null?d:c}}}),x.button=s.value=w),a.each(["radio","checkbox"],function(c){x[c]={get:function(a){return a.getAttribute("value")===null?"on":a.value},set:function(c,d){if(a.isArray(d))return c.checked=a.inArray(b.val(c),d)}}}),a.mix(b,{prop:function(c,e,f){if(a.isPlainObject(e)){for(var g in e)b.prop(c,g,e[g]);return}var h=b.query(c);e=t[e]||e;var i=v[e];if(f!==d)h.each(function(a){i&&i.set?i.set(a,f,e):a[e]=f});else if(h.length)return z(h[0],e)},hasProp:function(a,c){var e=b.query(a);for(var f=0;f<e.length;f++){var g=e[f];if(z(g,c)!==d)return!0}return!1},removeProp:function(c,e){e=t[e]||e,b.query(c).each(function(b){try{b[e]=d,delete b[e]}catch(c){a.log("delete el property error : "),a.log(c)}})},attr:function(c,e,f,g){if(a.isPlainObject(e)){g=f;for(var h in e)b.attr(c,h,e[h],g);return}if(!(e=a.trim(e)))return;if(g&&r[e])return b[e](c,f);e=e.toLowerCase();if(g&&r[e])return b[e](c,f);var i=b.query(c);if(f===d)return b.__attr(i[0],e);i.each(function(a){b.__attr(a,e,f)})},__attr:function(a,b,c){if(!k(a))return;b=q[b]||b;var e,f;j(a,"form")?e=w:l.test(b)?e=u:o.test(b)?e=w:e=s[b];if(c===d)return e&&e.get?e.get(a,b):(f=a.getAttribute(b),f===null?d:f);e&&e.set?e.set(a,c,b):a.setAttribute(b,i+c)},removeAttr:function(a,c){c=c.toLowerCase(),c=q[c]||c,b.query(a).each(function(a){if(k(a)){var b;a.removeAttribute(c),l.test(c)&&(b=t[c]||c)in a&&(a[b]=!1)}})},hasAttr:g?function(a,c){c=c.toLowerCase();var d=b.query(a);for(var e=0;e<d.length;e++){var f=d[e],g=f.getAttributeNode(c);if(g&&g.specified)return!0}return!1}:function(a,c){var d=b.query(a);for(var e=0;e<d.length;e++){var f=d[e];if(f.hasAttribute(c))return!0}return!1},val:function(c,e){var f,g;if(e===d){var h=b.get(c);if(h)return f=x[h.nodeName.toLowerCase()]||x[h.type],f&&"get"in f&&(g=f.get(h,"value"))!==d?g:(g=h.value,typeof g=="string"?g.replace(p,""):a.isNullOrUndefined(g)?"":g);return}b.query(c).each(function(b){if(b.nodeType!==1)return;var c=e;a.isNullOrUndefined(c)?c="":typeof c=="number"?c+="":a.isArray(c)&&(c=a.map(c,function(b){return a.isNullOrUndefined(c)?"":b+""})),f=x[b.nodeName.toLowerCase()]||x[b.type];if(!f||!("set"in f)||f.set(b,c,"value")===d)b.value=c})},text:function(a,c){if(c===d){var e=b.get(a);return k(e)?e[h]||i:y(e)?e.nodeValue:d}b.query(a).each(function(a){k(a)?a[h]=c:y(a)&&(a.nodeValue=c)})}}),b},{requires:["./base","ua"]}),KISSY.add("dom/class",function(a,b,c){function g(a){return(d+a+d).replace(f,d)}function h(d,f,g,h){if(!(f=a.trim(f)))return h?!1:c;var i=b.query(d),j=i.length,k=f.split(e),l,m,n=[];for(var o=0;o<k.length;o++){var p=a.trim(k[o]);p&&n.push(p)}for(o=0;o<j;o++){l=i[o];if(b._isElementNode(l)){m=g(l,n,n.length);if(m!==c)return m}}return h?!1:c}var d=" ",e=/[\.\s]\s*\.?/,f=/[\n\t]/g;return a.mix(b,{__hasClass:function(a,b){var c=a.className;return c?(c=g(c),c.indexOf(d+b+d)>-1):!1},hasClass:function(a,b){return h(a,b,function(a,b,c){var e=a.className;if(e){var f=g(e),h=0,i=!0;for(;h<c;h++)if(f.indexOf(d+b[h]+d)<0){i=!1;break}if(i)return!0}},!0)},addClass:function(b,e){h(b,e,function(b,c,f){var h=b.className;if(!h)b.className=e;else{var i=g(h),j=h,k=0;for(;k<f;k++)i.indexOf(d+c[k]+d)<0&&(j+=d+c[k]);b.className=a.trim(j)}},c)},removeClass:function(b,e){h(b,e,function(b,c,e){var f=b.className;if(f)if(!e)b.className="";else{var h=g(f),i=0,j;for(;i<e;i++){j=d+c[i]+d;while(h.indexOf(j)>=0)h=h.replace(j,d)}b.className=a.trim(h)}},c)},replaceClass:function(a,c,d){b.removeClass(a,c),b.addClass(a,d)},toggleClass:function(d,e,f){var g=a.isBoolean(f),i;h(d,e,function(a,c,d){var e=0,h;for(;e<d;e++)h=c[e],i=g?!f:b.hasClass(a,h),b[i?"removeClass":"addClass"](a,h)},c)}}),b},{requires:["dom/base"]}),KISSY.add("dom/create",function(a,b,c,d){function s(a,b){return a.getElementsByTagName(b)}function t(c){var d=a.require("event");d&&d.detach(c),b.removeData(c)}function u(a,c,d){if(g(c,b.DOCUMENT_FRAGMENT_NODE)){var e=c.childNodes,f=d.childNodes,i=0;while(e[i])f[i]&&u(a,e[i],f[i]),i++}else if(h(c)){var j=s(c,"*"),k=s(d,"*"),l=0;while(j[l])k[l]&&a(j[l],k[l]),l++}}function v(c,d){var e=a.require("event");if(h(d)&&!b.hasData(c))return;var f=b.data(c);for(var g in f)b.data(d,g,f[g]);e&&(e._removeData(d),e._clone(c,d))}function w(a,c){c.clearAttributes&&c.clearAttributes(),c.mergeAttributes&&c.mergeAttributes(a);var d=c.nodeName.toLowerCase(),e=a.childNodes;if(d==="object"&&!c.childNodes.length)for(var f=0;f<e.length;f++)c.appendChild(e[f].cloneNode(!0));else if(d!=="input"||a.type!=="checkbox"&&a.type!=="radio"){if(d==="option")c.selected=a.defaultSelected;else if(d==="input"||d==="textarea")c.defaultValue=a.defaultValue}else a.checked&&(c.defaultChecked=c.checked=a.checked),c.value!==a.value&&(c.value=a.value);c.removeAttribute(b.__EXPANDO)}function x(c,d){return a.isPlainObject(d)&&(h(c)?b.attr(c,d,!0):g(c,b.DOCUMENT_FRAGMENT_NODE)&&b.attr(c.childNodes,d,!0)),c}function y(b,c){var d=null,e,f;if(b&&(b.push||b.item)&&b[0]){c=c||b[0].ownerDocument,d=c.createDocumentFragment(),b=a.makeArray(b);for(e=0,f=b.length;e<f;e++)d.appendChild(b[e])}else a.log("Unable to convert "+b+" to fragment.");return d}var e=document,f=c.ie,g=b._nodeTypeIs,h=b._isElementNode,i=a.isString,j="div",k="parentNode",l=e.createElement(j),m=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,n=/<([\w:]+)/,o=/^\s+/,p=f&&f<9,q=/<|&#?\w+;/,r=/^<(\w+)\s*\/?>(?:<\/\1>)?$/;a.mix(b,{create:function(c,f,l,s){if(h(c)||g(c,b.TEXT_NODE))return b.clone(c);var t=null;if(!i(c))return t;s===d&&(s=!0),s&&(c=a.trim(c));if(!c)return t;var u=b._creators,v,w,z=l||e,A,B=j,C,D;return q.test(c)?(A=r.exec(c))?t=z.createElement(A[1]):(c=c.replace(m,"<$1></$2>"),(A=n.exec(c))&&(C=A[1])&&(B=C.toLowerCase()),v=(u[B]||u[j])(c,z),p&&(w=c.match(o))&&v.insertBefore(z.createTextNode(w[0]),v.firstChild),D=v.childNodes,D.length===1?t=D[0][k].removeChild(D[0]):D.length?t=y(D,z):a.error(c+" : create node error")):t=z.createTextNode(c),x(t,f)},_creators:{div:function(a,b){var c=b&&b!=e?b.createElement(j):l;return c.innerHTML="m<div>"+a+"<"+"/div>",c.lastChild}},html:function(a,c,e,f){var g=b.query(a),i=g[0];if(!i)return;if(c===d)return h(i)?i.innerHTML:null;var j=!1;c+="";if(!c.match(/<(?:script|style)/i)&&(!p||!c.match(o))&&!E[(c.match(n)||["",""])[1].toLowerCase()])try{g.each(function(a){h(a)&&(t(s(a,"*")),a.innerHTML=c)}),j=!0}catch(k){}j||(c=b.create(c,0,i.ownerDocument,!1),g.each(function(a){h(a)&&(b.empty(a),b.append(c,a,e))})),f&&f()},remove:function(a,c){b.query(a).each(function(a){if(!c&&h(a)){var b=s(a,"*");t(b),t(a)}a.parentNode&&a.parentNode.removeChild(a)})},clone:function(a,c,d,e){var f=b.get(a);if(!f)return null;var i=f.cloneNode(c);if(h(f)||g(f,b.DOCUMENT_FRAGMENT_NODE))h(f)&&w(f,i),c&&u(w,f,i);return d&&(v(f,i),c&&e&&u(v,f,i)),i},empty:function(a){b.query(a).each(function(a){b.remove(a.childNodes)})},_nl2frag:y});var z=b._creators,A=b.create,B="<table>",C="</table>",D=/(?:\/(?:thead|tfoot|caption|col|colgroup)>)+\s*<tbody/,E={option:"select",optgroup:"select",area:"map",thead:"table",td:"tr",th:"tr",tr:"tbody",tbody:"table",tfoot:"table",caption:"table",colgroup:"table",col:"colgroup",legend:"fieldset"};for(var F in E)(function(a){z[F]=function(b,c){return A("<"+a+">"+b+"<"+"/"+a+">",null,c)}})(E[F]);return f<8&&(z.tbody=function(a,b){var c=A(B+a+C,null,b),d=c.children.tags("tbody")[0];return c.children.length>1&&d&&!D.test(a)&&d[k].removeChild(d),c}),a.mix(z,{thead:z.tbody,tfoot:z.tbody,caption:z.tbody,colgroup:z.tbody}),b},{requires:["./base","ua"]}),KISSY.add("dom/data",function(a,b,c){function l(a){return a&&a.nodeType}var d=window,e="_ks_data_"+a.now(),f={},g={},h={};h.applet=1,h.object=1,h.embed=1;var i={hasData:function(b,d){if(b)if(d!==c){if(d in b)return!0}else if(!a.isEmptyObject(b))return!0;return!1}},j={hasData:function(a,b){if(a==d)return j.hasData(g,b);var c=a[e];return i.hasData(c,b)},data:function(a,b,f){if(a==d)return j.data(g,b,f);var h=a[e];if(f===c)return b!==c?h&&h[b]:(h=a[e]=a[e]||{},h);h=a[e]=a[e]||{},h[b]=f},removeData:function(b,f){if(b==d)return j.removeData(g,f);var h=b[e];if(!h)return;if(f!==c)delete h[f],a.isEmptyObject(h)&&j.removeData(b,c);else try{delete b[e]}catch(i){b[e]=null}}},k={hasData:function(a,b){var c=a[e];if(!c)return!1;var d=f[c];return i.hasData(d,b)},data:function(b,d,g){if(h[b.nodeName.toLowerCase()])return;var i=b[e];i||(i=b[e]=a.guid());var j=f[i];if(g===c)return d!==c?j&&j[d]:(j=f[i]=f[i]||{},j);j=f[i]=f[i]||{},j[d]=g},removeData:function(b,d){var g=b[e];if(!g)return;var h=f[g];if(!h)return;if(d!==c)delete h[d],a.isEmptyObject(h)&&k.removeData(b,c);else{delete f[g];try{delete b[e]}catch(i){}b.removeAttribute&&b.removeAttribute(e)}}};return a.mix(b,{__EXPANDO:e,hasData:function(a,c){var d=!1,e=b.query(a);for(var f=0;f<e.length;f++){var g=e[f];l(g)?d=k.hasData(g,c):d=j.hasData(g,c);if(d)return d}return d},data:function(d,e,f){if(a.isPlainObject(e)){for(var g in e)b.data(d,g,e[g]);return}if(f===c){var h=b.get(d);if(l(h))return k.data(h,e,f);if(h)return j.data(h,e,f)}else b.query(d).each(function(a){l(a)?k.data(a,e,f):j.data(a,e,f)})},removeData:function(a,c){b.query(a).each(function(a){l(a)?k.removeData(a,c):j.removeData(a,c)})}}),b},{requires:["./base"]}),KISSY.add("dom/insertion",function(a,b,c){function j(a){for(var b=0;b<a.length;b++){var d=a[b];if(d.nodeType==c.DOCUMENT_FRAGMENT_NODE)j(d.childNodes);else if(f(d,"input"))k(d);else if(h(d)){var e=d.getElementsByTagName("input");for(var g=0;g<e.length;g++)j(e[g])}}}function k(a){if(a.type==="checkbox"||a.type==="radio")a.defaultChecked=a.checked}function m(a){return!a.type||l.test(a.type)}function n(a,b){var d=[],f,i,j;for(f=0;a[f];f++){i=a[f],j=i.nodeName.toLowerCase();if(i.nodeType==c.DOCUMENT_FRAGMENT_NODE)d.push.apply(d,n(g(i.childNodes),b));else if(j==="script"&&m(i))i.parentNode&&i.parentNode.removeChild(i),b&&b.push(i);else{if(h(i)&&!e.test(j)){var k=[],l,o,p=i.getElementsByTagName("script");for(o=0;o<p.length;o++)l=p[o],m(l)&&k.push(l);a.splice.apply(a,[f+1,0].concat(k))}d.push(i)}}return d}function o(b){if(b.src)a.getScript(b.src);else{var c=a.trim(b.text||b.textContent||b.innerHTML||"");c&&a.globalEval(c)}}function p(d,e,f,g){d=c.query(d),g&&(g=[]),d=n(d,g),b.ie<8&&j(d),e=c.query(e);var h=d.length,i=e.length;if(!h&&(!g||!g.length)||!i)return;var k=c._nl2frag(d),l;i>1&&(l=c.clone(k,!0));for(var m=0;m<i;m++){var p=e[m];if(h){var q=m>0?c.clone(l,!0):k;f(q,p)}g&&g.length&&a.each(g,o)}}var d="parentNode",e=/^(?:button|input|object|select|textarea)$/i,f=c._nodeName,g=a.makeArray,h=c._isElementNode,i="nextSibling",l=/\/(java|ecma)script/i;a.mix(c,{insertBefore:function(a,b,c){p(a,b,function(a,b){b[d]&&b[d].insertBefore(a,b)},c)},insertAfter:function(a,b,c){p(a,b,function(a,b){b[d]&&b[d].insertBefore(a,b[i])},c)},appendTo:function(a,b,c){p(a,b,function(a,b){b.appendChild(a)},c)},prependTo:function(a,b,c){p(a,b,function(a,b){b.insertBefore(a,b.firstChild)},c)}});var q={prepend:"prependTo",append:"appendTo",before:"insertBefore",after:"insertAfter"};for(var r in q)c[r]=c[q[r]];return c},{requires:["ua","./create"]}),KISSY.add("dom/offset",function(a,b,c,d){function F(a){var d,e=0,i=0,j=f.body,l=k(a[v]);if(a[E]){d=a[E](),e=d[z],i=d[A];var m=g&&f["documentMode"]!=9&&(n?h.clientTop:j.clientTop)||0,o=g&&f["documentMode"]!=9&&(n?h.clientLeft:j.clientLeft)||0;e-=o,i-=m,c.mobile=="apple"&&(e-=b[C](l),i-=b[D](l))}return{left:e,top:i}}function G(a){var c=F(a),d=k(a[v]);return c.left+=b[C](d),c.top+=b[D](d),c}function H(a,b){var c={left:0,top:0},d=k(a[v]),e=a;b=b||d;do{var f=d==b?G(e):F(e);c.left+=f.left,c.top+=f.top}while(d&&d!=b&&(e=d.frameElement)&&(d=d.parent));return c}function I(a,c){b.css(a,q)==="static"&&(a.style[q]=r);var d=H(a),e={},f,g;for(g in c)f=p(b.css(a,g),10)||0,e[g]=f+c[g]-d[g];b.css(a,e)}var e=window,f=document,g=c.ie,h=f.documentElement,i=b._isElementNode,j=b._nodeTypeIs,k=b._getWin,l="CSS1Compat",m="compatMode",n=f[m]===l,o=Math.max,p=parseInt,q="position",r="relative",s="document",t="body",u="documentElement",v="ownerDocument",w="viewport",x="scroll",y="client",z="left",A="top",B=a.isNumber,C=x+"Left",D=x+"Top",E="getBoundingClientRect";return a.mix(b,{offset:function(a,c,e){if(c===d){var f=b.get(a),g;return f&&(g=H(f,e)),g}b.query(a).each(function(a){I(a,c)})},scrollIntoView:function(a,c,e,f,g){if(!(a=b.get(a)))return;c&&(c=b.get(c)),c||(c=a.ownerDocument),g!==!0&&(f=f===d?!0:!!f,e=e===d?!0:!!e),j(c,b.DOCUMENT_NODE)&&(c=k(c));var h=!!k(c),i=b.offset(a),l=b.outerHeight(a),m=b.outerWidth(a),n,o,q,r,s,t,u,v,w,x;h?(u=c,x=b.height(u),w=b.width(u),v={left:b.scrollLeft(u),top:b.scrollTop(u)},s={left:i[z]-v[z],top:i[A]-v[A]},t={left:i[z]+m-(v[z]+w),top:i[A]+l-(v[A]+x)},r=v):(n=b.offset(c),o=c.clientHeight,q=c.clientWidth,r={left:b.scrollLeft(c),top:b.scrollTop(c)},s={left:i[z]-n[z]-(p(b.css(c,"borderLeftWidth"))||0),top:i[A]-n[A]-(p(b.css(c,"borderTopWidth"))||0)},t={left:i[z]+m-(n[z]+q+(p(b.css(c,"borderRightWidth"))||0)),top:i[A]+l-(n[A]+o+(p(b.css(c,"borderBottomWidth"))||0))});if(s.top<0||t.top>0)e===!0?b.scrollTop(c,r.top+s.top):e===!1?b.scrollTop(c,r.top+t.top):s.top<0?b.scrollTop(c,r.top+s.top):b.scrollTop(c,r.top+t.top);f&&(s.left<0||t.left>0)&&(e===!0?b.scrollLeft(c,r.left+s.left):e===!1?b.scrollLeft(c,r.left+t.left):s.left<0?b.scrollLeft(c,r.left+s.left):b.scrollLeft(c,r.left+t.left))},docWidth:0,docHeight:0,viewportHeight:0,viewportWidth:0}),a.each(["Left","Top"],function(a,c){var f=x+a;b[f]=function(g,h){if(B(g))return arguments.callee(e,g);g=b.get(g);var j,l=k(g),m;if(l)if(h!==d){h=parseFloat(h);var n=a=="Left"?h:b.scrollLeft(l),o=a=="Top"?h:b.scrollTop(l);l.scrollTo(n,o)}else j=l["page"+(c?"Y":"X")+"Offset"],B(j)||(m=l[s],j=m[u][f],B(j)||(j=m[t][f]));else i(g)&&(h!==d?g[f]=parseFloat(h):j=g[f]);return j}}),a.each(["Width","Height"],function(a){b["doc"+a]=function(c){c=b.get(c);var d=k(c),e=d[s];return o(e[u][x+a],e[t][x+a],b[w+a](e))},b[w+a]=function(c){c=b.get(c);var d=y+a,e=k(c),f=e[s],g=f[t],h=f[u],i=h[d];return f[m]===l&&i||g&&g[d]||i}}),b},{requires:["./base","ua"]}),KISSY.add("dom/style",function(a,b,c,d){function C(a){return a.replace(u,v)}function F(a){var d,f;if(!B[a]){d=e.body||e.documentElement,f=e.createElement(a),b.prepend(f,d);var g=b.css(f,"display");d.removeChild(f);if(g==="none"||g===""){if(!D){D=e.createElement("iframe"),D.frameBorder=D.width=D.height=0,b.prepend(D,d);var h;if(h=b._genEmptyIframeSrc())D.src=h}else b.prepend(D,d);if(!E||!D.createElement)try{E=D.contentWindow.document,E.write((e.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><head>"+(c.ie&&b._isCustomDomain()?"<script>document.domain = '"+e.domain+"';</script>":"")+"</head><body>"),E.close()}catch(i){return"block"}f=E.createElement(a),E.body.appendChild(f),g=b.css(f,"display"),d.removeChild(D)}B[a]=g}return B[a]}function G(a){return a.charAt(0).toUpperCase()+a.substring(1)}function I(a,b,c){var d={};for(var e in b)d[e]=a[h][e],a[h][e]=b[e];c.call(a);for(e in b)a[h][e]=d[e]}function J(b,c,e){var f;if(b.nodeType===3||b.nodeType===8||!(f=b[h]))return d;c=C(c);var g,i=z[c];c=A[c]||c;if(e!==d){e===null||e===x?e=x:!isNaN(Number(e))&&!t[c]&&(e+=y),i&&i.set&&(e=i.set(b,e));if(e!==d)try{b[h][c]=e}catch(j){a.log("css set error :"+j)}return d}return i&&"get"in i&&(g=i.get(b,!1))!==d||(g=f[c]),g===d?"":g}function K(c,d,e){if(a.isWindow(c))return d==l?b.viewportWidth(c):b.viewportHeight(c);if(c.nodeType==9)return d==l?b.docWidth(c):b.docHeight(c);var f=d===l?["Left","Right"]:["Top","Bottom"],g=d===l?c.offsetWidth:c.offsetHeight;if(g>0)return e!=="border"&&a.each(f,function(a){e||(g-=parseFloat(b.css(c,"padding"+a))||0),e==="margin"?g+=parseFloat(b.css(c,e+a))||0:g-=parseFloat(b.css(c,"border"+a+"Width"))||0}),g;g=b._getComputedStyle(c,d);if(g<0||a.isNullOrUndefined(g))g=c.style[d]||0;return g=parseFloat(g)||0,e&&a.each(f,function(a){g+=parseFloat(b.css(c,"padding"+a))||0,e!=="padding"&&(g+=parseFloat(b.css(c,"border"+a+"Width"))||0),e==="margin"&&(g+=parseFloat(b.css(c,e+a))||0)}),g}var e=document,f=e.documentElement,g=c.ie,h="style",i="float",j="cssFloat",k="styleFloat",l="width",m="height",n="auto",o="display",p=o+a.now(),q="none",r=parseInt,s=/^-?\d+(?:px)?$/i,t={fillOpacity:1,fontWeight:1,lineHeight:1,opacity:1,orphans:1,widows:1,zIndex:1,zoom:1},u=/-([a-z])/ig,v=function(a,b){return b.toUpperCase()},w=/([A-Z]|^ms)/g,x="",y="px",z={},A={},B={};f[h][j]!==d?A[i]=j:f[h][k]!==d&&(A[i]=k);var D,E;a.mix(b,{_camelCase:C,_cssNumber:t,_CUSTOM_STYLES:z,_cssProps:A,_getComputedStyle:function(a,c){var d="",e={},f=a.ownerDocument;c=c.replace(w,"-$1").toLowerCase();if(e=f.defaultView.getComputedStyle(a,null))d=e.getPropertyValue(c)||e[c];return d==""&&!b.__contains(f.documentElement,a)&&(c=A[c]||c,d=a[h][c]),d},style:function(c,e,f){if(a.isPlainObject(e)){for(var g in e)b.style(c,g,e[g]);return}if(f===d){var h=b.get(c),i="";return h&&(i=J(h,e,f)),i}b.query(c).each(function(a){J(a,e,f)})},css:function(c,e,f){if(a.isPlainObject(e)){for(var g in e)b.css(c,g,e[g]);return}e=C(e);var h=z[e];if(f===d){var i=b.get(c),j="";return i&&(h&&"get"in h&&(j=h.get(i,!0))!==d||(j=b._getComputedStyle(i,e))),j===d?"":j}b.style(c,e,f)},show:function(a){b.query(a).each(function(a){a[h][o]=b.data(a,p)||x;if(b.css(a,o)===q){var c=a.tagName.toLowerCase(),d=F(c);b.data(a,p,d),a[h][o]=d}})},hide:function(a){b.query(a).each(function(a){var c=a[h],d=c[o];d!==q&&(d&&b.data(a,p,d),c[o]=q)})},toggle:function(a){b.query(a).each(function(a){b.css(a,o)===q?b.show(a):b.hide(a)})},addStyleSheet:function(c,d,e){a.isString(c)&&(e=d,d=c,c=window),c=b.get(c);var f=b._getWin(c),g=f.document,h;e&&(e=e.replace("#",x))&&(h=b.get("#"+e,g));if(h)return;h=b.create("<style>",{id:e},g),b.get("head",g).appendChild(h),h.styleSheet?h.styleSheet.cssText=d:h.appendChild(g.createTextNode(d))},unselectable:function(a){b.query(a).each(function(a){if(c.gecko)a[h].MozUserSelect="none";else if(c.webkit)a[h].KhtmlUserSelect="none";else if(c.ie||c.opera){var b,d=0,e=a.getElementsByTagName("*");a.setAttribute("unselectable","on");while(b=e[d++])switch(b.tagName.toLowerCase()){case"iframe":case"textarea":case"input":case"select":break;default:b.setAttribute("unselectable","on")}}})},innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0,width:0,height:0}),a.each([l,m],function(a){b["inner"+G(a)]=function(c){var d=b.get(c);return d?K(d,a,"padding"):null},b["outer"+G(a)]=function(c,d){var e=b.get(c);return e?K(e,a,d?"margin":"border"):null},b[a]=function(c,d){var e=b.css(c,a,d);return e&&(e=parseFloat(e)),e}});var H={position:"absolute",visibility:"hidden",display:"block"};return a.each(["height","width"],function(a){z[a]={get:function(b,c){var d;if(c)return b.offsetWidth!==0?d=K(b,a):I(b,H,function(){d=K(b,a)}),d+"px"},set:function(a,b){if(!s.test(b))return b;b=parseFloat(b);if(b>=0)return b+"px"}}}),a.each(["left","top"],function(d){z[d]={get:function(e,f){if(f){var h=b._getComputedStyle(e,d),i;if(h===n){h=0;if(a.inArray(b.css(e,"position"),["absolute","fixed"])){i=e[d==="left"?"offsetLeft":"offsetTop"];if(g&&document["documentMode"]!=9||c.opera)i-=e.offsetParent&&e.offsetParent["client"+(d=="left"?"Left":"Top")]||0;h=i-(r(b.css(e,"margin-"+d))||0)}h+="px"}return h}}}}),b},{requires:["dom/base","ua"]}),KISSY.add("dom/selector",function(a,b,c){function r(a,b){var e,f,g=typeof a=="string",h=b===c?[d]:z(b);g&&(a=n(a),h.length==1&&a&&(e=v(a,h[0])));if(!e){e=[];if(a){for(f=0;f<h.length;f++)k.apply(e,s(a,h[f]));e.length>1&&(h.length>1||g&&a.indexOf(m)>-1)&&y(e)}}return e.each=function(a){var b=this,c,d;for(d=0;d<b.length;d++){c=b[d];if(a(c,d)===!1)break}},e}function s(a,b){var c=[],d=typeof a=="string";return d&&a.match(q)||!d?c=w(a,b):d&&a.indexOf(m)>-1?c=u(a,b):c=t(a,b),c}function t(a,b){var c=[],d=f("sizzle");return d?d(a,b,c):E(a),c}function u(a,b){var c=[],d,e=a.split(/\s*,\s*/);for(d=0;d<e.length;d++)k.apply(c,s(e[d],b));return c}function v(a,b){var c,d,e,f,g,h;return p.test(a)?(d=A(a.slice(1),b),d?c=[d]:c=[]):(e=q.exec(a),e&&(f=e[1],g=e[2],h=e[3],b=f?A(f,b):b,b&&(h?!f||a.indexOf(l)!=-1?c=[].concat(C(h,g,b)):(d=A(f,b),d&&D(d,h)&&(c=[d])):g&&(c=B(g,b))),c=c||[])),c}function w(a,b){var c,d=typeof a=="string";return d?c=v(a,b)||[]:a&&(g(a)||i(a))?c=e(a,function(a){return x(a,b)}):a&&x(a,b)&&(c=[a]),c}function x(a,c){return a?c==d?!0:b.__contains(c,a):!1}function z(a){return a===c?[d]:r(a,c)}function A(a,c){var d=c,e;c.nodeType!==b.DOCUMENT_NODE&&(d=c.ownerDocument),e=d.getElementById(a);if(!e||e.id!==a)e&&e.parentNode?b.__attr(e,"id")!==a?e=b.filter(o,"#"+a,c)[0]||null:x(e,c)||(e=null):e=null;return e}function B(a,b){return b&&h(b.getElementsByTagName(a))||[]}function D(a,c){return b.__hasClass(a,c)}function E(b){a.error("Unsupported selector: "+b)}var d=document,e=a.filter,f=function(b){return a.require(b)},g=a.isArray,h=a.makeArray,i=b._isNodeList,j=b._nodeName,k=Array.prototype.push,l=" ",m=",",n=a.trim,o="*",p=/^#[\w-]+$/,q=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/,y;(function(){var a,b,c,e=!0;[0,0].sort(function(){return e=!1,0}),y=function(b){if(a){c=e,b.sort(a);if(c){var d=1,f=b.length;while(d<f)b[d]===b[d-1]?b.splice(d,1):d++}}return b},d.documentElement.compareDocumentPosition?a=b=function(a,b){return a==b?(c=!0,0):!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition?-1:1:a.compareDocumentPosition(b)&4?-1:1}:a=b=function(a,b){if(a==b)return c=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex}})(),function(){var a=d.createElement("div");a.appendChild(d.createComment("")),a.getElementsByTagName(o).length>0&&(B=function(a,b){var c=h(b.getElementsByTagName(a));if(a===o){var d=[],e=0,f;while(f=c[e++])f.nodeType===1&&d.push(f);c=d}return c})}();var C=d.getElementsByClassName?function(a,b,c){if(!c)return[];var d=c.getElementsByClassName(a),e,f=0,g=d.length,i;if(b&&b!==o){e=[];for(;f<g;++f)i=d[f],j(i,b)&&e.push(i)}else e=h(d);return e}:d.querySelectorAll?function(a,b,c){return c&&h(c.querySelectorAll((b?b:"")+"."+a))||[]}:function(a,b,c){if(!c)return[];var d=c.getElementsByTagName(b||o),e=[],f=0,g=d.length,h;for(;f<g;++f)h=d[f],D(h,a)&&e.push(h);return e};return a.mix(b,{query:r,get:function(a,b){return r(a,b)[0]||null},unique:y,filter:function(c,d,e){var g=r(c,e),h=f("sizzle"),i,k,l,m,o=[];return typeof d=="string"&&(d=n(d))&&(i=q.exec(d))&&(l=i[1],k=i[2],m=i[3],l?l&&!k&&!m&&(d=function(a){return b.__attr(a,"id")===l}):d=function(a){var b=!0,c=!0;return k&&(b=j(a,k)),m&&(c=D(a,m)),c&&b}),a.isFunction(d)?o=a.filter(g,d):d&&h?o=h.matches(d,g):E(d),o},test:function(a,c,d){var e=r(a,d);return e.length&&b.filter(e,c,d).length===e.length}}),b},{requires:["./base"]}),KISSY.add("dom/style-ie",function(a,b,c,d){var e=100;if(!c.ie)return b;var f=document,g=f.documentElement,h="opacity",i="style",j="filter",k="currentStyle",l="runtimeStyle",m="left",n="px",o=d._CUSTOM_STYLES,p=/^-?\d+(?:px)?$/i,q=/^-?\d/,r=/opacity=([^)]*)/,s=/alpha\([^)]*\)/i;try{a.isNullOrUndefined(g.style[h])&&(o[h]={get:function(a,b){return r.test((b&&a[k]?a[k][j]:a[i][j])||"")?parseFloat(RegExp.$1)/e+"":b?"1":""},set:function(b,c){c=parseFloat(c);var d=b[i],f=b[k],g=isNaN(c)?"":"alpha("+h+"="+c*e+")",l=a.trim(f&&f[j]||d[j]||"");d.zoom=1;if(c>=1&&a.trim(l.replace(s,""))===""){d.removeAttribute(j);if(f&&!f[j])return}d.filter=s.test(l)?l.replace(s,g):l+(l?", ":"")+g}})}catch(t){a.log("IE filters ActiveX is disabled. ex = "+t)}var u=c["ie"]==8,v={},w=["","Top","Left","Right","Bottom"];return v.thin=u?"1px":"2px",v.medium=u?"3px":"4px",v.thick=u?"5px":"6px",a.each(w,function(a){var b="border"+a+"Width",c="border"+a+"Style";o[b]={get:function(a,d){var e=d?a[k]:0,f=e&&String(e[b])||undefined;return f&&f.indexOf("px")<0&&(v[f]&&e[c]!=="none"?f=v[f]:f=0),f}}}),!(f.defaultView||{}).getComputedStyle&&g[k]&&(b._getComputedStyle=function(a,c){c=b._cssProps[c]||c;var d=a[k]&&a[k][c];if(!p.test(d)&&q.test(d)){var e=a[i],f=e[m],g=a[l]&&a[l][m];g&&(a[l][m]=a[k][m]),e[m]=c==="fontSize"?"1em":d||0,d=e.pixelLeft+n,e[m]=f,g&&(a[l][m]=g)}return d===""?"auto":d}),b},{requires:["./base","ua","./style"]}),KISSY.add("dom/traversal",function(a,b,c){function f(e,f,h,i,j,k){if(!(e=b.get(e)))return null;if(f===0)return e;k||(e=e[h]);if(!e)return null;j=j&&b.get(j)||null,f===c&&(f=1);var l=[],m=a.isArray(f),n,o;a.isNumber(f)&&(n=0,o=f,f=function(){return++n===o});while(e&&e!=j){if(d(e)&&g(e,f)&&(!i||i(e))){l.push(e);if(!m)break}e=e[h]}return m?l:l[0]||null}function g(c,d){if(!d)return!0;if(a.isArray(d)){for(var e=0;e<d.length;e++)if(b.test(c,d[e]))return!0}else if(b.test(c,d))return!0;return!1}function h(a,c,e){var f=[],g=b.get(a),h,i=g,j;g&&e&&(i=g.parentNode);if(i)for(h=0,j=i.firstChild;j;j=j.nextSibling)d(j)&&j!==g&&(!c||b.test(j,c))&&(f[h++]=j);return f}var d=b._isElementNode,e=16;return a.mix(b,{closest:function(a,c,d){return f(a,c,"parentNode",function(a){return a.nodeType!=b.DOCUMENT_FRAGMENT_NODE},d,!0)},parent:function(a,c,d){return f(a,c,"parentNode",function(a){return a.nodeType!=b.DOCUMENT_FRAGMENT_NODE},d)},first:function(a,d){var e=b.get(a);return f(e&&e.firstChild,d,"nextSibling",c,c,!0)},last:function(a,d){var e=b.get(a);return f(e&&e.lastChild,d,"previousSibling",c,c,!0)},next:function(a,b){return f(a,b,"nextSibling",c)},prev:function(a,b){return f(a,b,"previousSibling",c)},siblings:function(a,b){return h(a,b,!0)},children:function(a,b){return h(a,b,c)},__contains:document.documentElement.contains?function(a,c){if(a.nodeType==b.TEXT_NODE)return!1;var d;if(c.nodeType==b.TEXT_NODE)c=c.parentNode,d=!0;else{if(c.nodeType==b.DOCUMENT_NODE)return!1;d=a!==c}return d&&(a.contains?a.contains(c):!0)}:document.documentElement.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&e)}:0,contains:function(a,c){a=b.get(a),c=b.get(c);if(a&&c)return b.__contains(a,c)},equals:function(a,c){a=b.query(a),c=b.query(c);if(a.length!=c.length)return!1;for(var d=a.length;d>=0;d--)if(a[d]!=c[d])return!1;return!0}}),b},{requires:["./base"]}),KISSY.add("dom",function(a,b){return b},{requires:["dom/attr","dom/class","dom/create","dom/data","dom/insertion","dom/offset","dom/style","dom/selector","dom/style-ie","dom/traversal"]}),KISSY.add("event/keycodes",function(){var a={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229};return a.isTextModifyingKeyEvent=function(b){if(b.altKey&&!b.ctrlKey||b.metaKey||b.keyCode>=a.F1&&b.keyCode<=a.F12)return!1;switch(b.keyCode){case a.ALT:case a.CAPS_LOCK:case a.CONTEXT_MENU:case a.CTRL:case a.DOWN:case a.END:case a.ESC:case a.HOME:case a.INSERT:case a.LEFT:case a.MAC_FF_META:case a.META:case a.NUMLOCK:case a.NUM_CENTER:case a.PAGE_DOWN:case a.PAGE_UP:case a.PAUSE:case a.PHANTOM:case a.PRINT_SCREEN:case a.RIGHT:case a.SHIFT:case a.UP:case a.WIN_KEY:case a.WIN_KEY_RIGHT:return!1;default:return!0}},a.isCharacterKey=function(b){if(b>=a.ZERO&&b<=a.NINE)return!0;if(b>=
a.NUM_ZERO&&b<=a.NUM_MULTIPLY)return!0;if(b>=a.A&&b<=a.Z)return!0;if(goog.userAgent.WEBKIT&&b==0)return!0;switch(b){case a.SPACE:case a.QUESTION_MARK:case a.NUM_PLUS:case a.NUM_MINUS:case a.NUM_PERIOD:case a.NUM_DIVISION:case a.SEMICOLON:case a.DASH:case a.EQUALS:case a.COMMA:case a.PERIOD:case a.SLASH:case a.APOSTROPHE:case a.SINGLE_QUOTE:case a.OPEN_SQUARE_BRACKET:case a.BACKSLASH:case a.CLOSE_SQUARE_BRACKET:return!0;default:return!1}},a}),KISSY.add("event/object",function(a,b){function e(a,b,c){var d=this;d.currentTarget=a,d.originalEvent=b||{},b?(d.type=b.type,d._fix()):(d.type=c,d.target=a),d.currentTarget=a,d.fixed=!0}var c=document,d="altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which axis".split(" ");return a.augment(e,{_fix:function(){var a=this,e=a.originalEvent,f=d.length,g,h=a.currentTarget,i=h.nodeType===9?h:h.ownerDocument||c;while(f)g=d[--f],a[g]=e[g];a.target||(a.target=a.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),!a.relatedTarget&&a.fromElement&&(a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement);if(a.pageX===b&&a.clientX!==b){var j=i.documentElement,k=i.body;a.pageX=a.clientX+(j&&j.scrollLeft||k&&k.scrollLeft||0)-(j&&j.clientLeft||k&&k.clientLeft||0),a.pageY=a.clientY+(j&&j.scrollTop||k&&k.scrollTop||0)-(j&&j.clientTop||k&&k.clientTop||0)}a.which===b&&(a.which=a.charCode===b?a.keyCode:a.charCode),a.metaKey===b&&(a.metaKey=a.ctrlKey),!a.which&&a.button!==b&&(a.which=a.button&1?1:a.button&2?3:a.button&4?2:0)},preventDefault:function(){var a=this.originalEvent;a.preventDefault?a.preventDefault():a.returnValue=!1,this.isDefaultPrevented=!0},stopPropagation:function(){var a=this.originalEvent;a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,this.isPropagationStopped=!0},stopImmediatePropagation:function(){var a=this;a.isImmediatePropagationStopped=!0,a.stopPropagation()},halt:function(a){a?this.stopImmediatePropagation():this.stopPropagation(),this.preventDefault()}}),e}),KISSY.add("event/utils",function(a,b){function c(b,c,d){var e=b.scope||d,f=1,g,h,i=c.scope||d;return b.fn!==c.fn||e!==i?f=0:(g=b.data)!==(h=c.data)&&(!g&&h||g&&!h?f=0:g&&h&&(!g.equals||!h.equals?a.error("no equals in data"):g.equals(h,d)||(f=0))),f}function d(a){return a&&a.nodeType!==b.TEXT_NODE&&a.nodeType!==b.COMMENT_NODE}function e(b,c,d,e){if(e&&e.indexOf(" ")>0){var f=a.makeArray(arguments);return a.each(e.split(/\s+/),function(a){var e=[].concat(f);e.splice(0,4,d,a),b[c].apply(b,e)}),!0}return 0}function f(b,c){a.each(b.split(/\s+/),c)}var g=document,h=g.addEventListener?function(a,b,c,d){a.addEventListener&&a.addEventListener(b,c,!!d)}:function(a,b,c){a.attachEvent&&a.attachEvent("on"+b,c)},i=g.removeEventListener?function(a,b,c,d){a.removeEventListener&&a.removeEventListener(b,c,!!d)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)};return{splitAndRun:f,batchForType:e,isValidTarget:d,isIdenticalHandler:c,simpleAdd:h,simpleRemove:i}},{requires:["dom"]}),KISSY.add("event/base",function(a,b,c,d,e){function u(a,b){var c=w(a)||{};return c[b]||[]}function v(a,b){var c=u(a,b.type).slice(0),d,f,g=0,h=c.length,i;for(;g<h;++g){i=c[g],d=i.fn.call(i.scope||a,b,i.data),d!==e&&(f!==!1&&(f=d),d===!1&&b.halt());if(b.isImmediatePropagationStopped)break}return f}function w(a){var b=t._data(a);return b&&b.events}function x(a,b,c,d,e){var f=r[b]||{};!d.length&&(!f.setup||f.setup.call(a)===!1)&&j(a,b,c),f.add&&f.add.call(a,e)}function y(b,d,g,h){if(!f(b))return!1;var i,j=!0;g instanceof c?i=g:(i=new c(b,e,d),a.mix(i,g)),i.type=d,h&&i.halt();var k=b,m="on"+d;do i.currentTarget=k,v(k,i),k[m]&&k[m].call(k)===!1&&i.preventDefault(),k=k.parentNode||k.ownerDocument||k===b.ownerDocument&&window;while(k&&!i.isPropagationStopped);if(!i.isDefaultPrevented){if(d!=="click"||!l(b,"a")){var n;try{m&&b[d]&&(n=b[m],n&&(b[m]=null),p=d,b[d]())}catch(o){a.log("trigger action error : "),a.log(o)}n&&(b[m]=n),p=q}}else j=!1;return j}var f=d.isValidTarget,g=d.isIdenticalHandler,h=d.batchForType,i=d.simpleRemove,j=d.simpleAdd,k=d.splitAndRun,l=b._nodeName,m=a.makeArray,n=a.each,o=a.trim,p="",q="trigger-none-"+a.now(),r={},s="ksEventTargetId"+a.now(),t={_clone:function(a,c){if(c.nodeType!==b.ELEMENT_NODE||!t._hasData(a))return;var d=t._data(a),e=d.events;n(e,function(a,b){n(a,function(a){t.on(c,b,a.fn,a.scope,a.data)})})},_hasData:function(a){return b.hasData(a,s)},_data:function(a){var c=m(arguments);return c.splice(1,0,s),b.data.apply(b,c)},_removeData:function(a){var c=m(arguments);return c.splice(1,0,s),b.removeData.apply(b,c)},special:r,__add:function(b,d,e,h,i,j){var k;if(!d||!a.isFunction(h)||b&&!f(d))return;k=t._data(d),k||t._data(d,k={});var l=k.events=k.events||{},m=l[e]=l[e]||[],n={fn:h,scope:i,data:j},o=k.handler;o||(o=k.handler=function(b,d){if(b&&b.type==p)return;var e=o.target;if(!b||!b.fixed)b=new c(e,b);var f=b.type;return a.isPlainObject(d)&&a.mix(b,d),f&&(b.type=f),v(e,b)},o.target=d);for(var q=m.length-1;q>=0;--q)if(g(m[q],n,d))return;b&&(x(d,e,o,m,n),d=null),m.push(n)},add:function(a,c,d,e,f){return c=o(c),h(t,"add",a,c,d,e,f)?a:(b.query(a).each(function(a){t.__add(!0,a,c,d,e,f)}),a)},__remove:function(b,c,d,h,j,k){if(!c||b&&!f(c))return;var l=t._data(c),m=l&&l.events,n,o,p,q,s,u=b&&r[d]||{};if(!m)return;if(!d){for(d in m)t.__remove(b,c,d);return}if(n=m[d]){o=n.length;if(h&&o){var v={data:k,fn:h,scope:j},w;for(p=0,q=0,s=[];p<o;++p)w=n[p],g(w,v,c)?u.remove&&u.remove.call(c,w):s[q++]=w;m[d]=s,o=s.length}if(h===e||o===0)b&&(!u.tearDown||u.tearDown.call(c)===!1)&&i(c,d,l.handler),delete m[d]}a.isEmptyObject(m)&&(l.handler.target=null,delete l.handler,delete l.events,t._removeData(c))},remove:function(a,c,d,e,f){return c=o(c),h(t,"remove",a,c,d,e)?a:(b.query(a).each(function(a){t.__remove(!0,a,c,d,e,f)}),a)},_handle:v,fire:function(a,c,d,e){var f=!0;return c=o(c),c.indexOf(" ")>-1?(k(c,function(b){f=t.fire(a,b,d,e)&&f}),f):(d=d||{},d.type=c,b.query(a).each(function(a){f=y(a,c,d,e)&&f}),f)}};return t.__getListeners=u,t.on=t.add,t.detach=t.remove,t},{requires:["dom","./object","./utils"]}),KISSY.add("event/target",function(a,b,c,d,e){function k(b,d,f){if(f instanceof c)return f.currentTarget=b,f;var g=new c(b,e,d);return a.isPlainObject(f)&&a.mix(g,f),g.type=d,g}function l(a){return a[f]=a[f]||{},a[f]}function m(a){return a[i]=a[i]||{},a[i]}function n(a,b){var c=l(a);return c[b]&&c[b].bubbles||c[j]&&c[j].bubbles}function o(a){return function(c,d,e){var f=this;return c=g(c),h(c,function(c){b["__"+a](!1,f,c,d,e)}),f}}var f="__~ks_publish",g=a.trim,h=d.splitAndRun,i="__~ks_bubble_targets",j="*",p={fire:function(a,c){var d=this,e,f,i;return a=g(a),a.indexOf(" ")>0?(h(a,function(a){f=d.fire(a,c),f===!1&&(e=!1)}),e):(i=k(d,a,c),e=b._handle(d,i),!i.isPropagationStopped&&n(d,a)&&(f=d.bubble(a,i),e!==!1&&(e=f)),e)},publish:function(a,b){var c=this,d=l(c);a=g(a),a&&(d[a]=b)},bubble:function(b,c){var d=this,e,f=m(d);return a.each(f,function(a){var d=a.fire(b,c);e!==!1&&(e=d)}),e},addTarget:function(b){var c=this,d=m(c);d[a.stamp(b)]=b},removeTarget:function(b){var c=this,d=m(c);delete d[a.stamp(b)]},on:o("add")};return p.detach=o("remove"),p},{requires:["./base","./object","./utils"]}),KISSY.add("event/focusin",function(a,b,c){return b.ie||a.each([{name:"focusin",fix:"focus"},{name:"focusout",fix:"blur"}],function(a){function d(b){var d=b.target;return c.fire(d,a.name)}var b=0;c.special[a.name]={setup:function(){b++===0&&document.addEventListener(a.fix,d,!0)},tearDown:function(){--b===0&&document.removeEventListener(a.fix,d,!0)}}}),c},{requires:["ua","./base"]}),KISSY.add("event/hashchange",function(a,b,c,d){var e=document,f=e.documentMode,g=f||d.ie,h="hashchange";if(!("on"+h in window)||g&&g<8){function i(a){return a.contentWindow.document}var j=50,k=window,l="<html><head><title>"+(e.title||"")+" - {hash}</title>{head}</head><body>{hash}</body></html>",m=function(){var a=location.href;return"#"+a.replace(/^[^#]*#?(.*)$/,"$1")},n,o,p=function(){var a=m();a!==o&&(o=a,q(a)),n=setTimeout(p,j)},q=g&&g<8?function(b){var d=a.substitute(l,{hash:b,head:c._isCustomDomain()?"<script>document.domain = '"+e.domain+"';</script>":""}),f=i(u);try{f.open(),f.write(d),f.close()}catch(g){}}:function(){r()},r=function(){b.fire(k,h)},s=function(){n||p()},t=function(){n&&clearTimeout(n),n=0},u;g<8&&(s=function(){if(!u){var d=c._genEmptyIframeSrc();u=c.create("<iframe "+(d?'src="'+d+'"':"")+' style="display: none" '+'height="0" '+'width="0" '+'tabindex="-1" '+'title="empty"/>'),c.prepend(u,e.documentElement),b.add(u,"load",function(){b.remove(u,"load"),q(m()),b.add(u,"load",f),p()}),e.onpropertychange=function(){try{event.propertyName==="title"&&(i(u).title=e.title+" - "+m())}catch(a){}};function f(){var b=a.trim(i(u).body.innerText),c=m();b!=c&&(a.log("set loc hash :"+b),location.hash=b,o=b),r()}}},t=function(){n&&clearTimeout(n),n=0,b.detach(u),c.remove(u),u=0}),b.special[h]={setup:function(){if(this!==k)return;o=m(),s()},tearDown:function(){if(this!==k)return;t()}}}},{requires:["./base","dom","ua"]}),KISSY.add("event/valuechange",function(a,b,c){function j(a){c.removeData(a,g);if(c.hasData(a,h)){var b=c.data(a,h);clearTimeout(b),c.removeData(a,h)}}function k(a){var b=a.target;j(b)}function l(a){if(c.hasData(a,h))return;c.data(a,h,setTimeout(function(){var e=a.value,f=c.data(a,g);e!==f&&(b.fire(a,d,{prevVal:f,newVal:e},!0),c.data(a,g,e)),c.data(a,h,setTimeout(arguments.callee,i))},i))}function m(a){var b=a.target;a.type=="focus"&&c.data(b,g,b.value),l(b)}function n(a){o(a),b.on(a,"blur",k),b.on(a,"mousedown keyup keydown focus",m)}function o(a){j(a),b.remove(a,"blur",k),b.remove(a,"mousedown keyup keydown focus",m)}var d="valuechange",e=c._nodeName,f="event/valuechange",g=f+"/history",h=f+"/poll",i=50;return b.special[d]={setup:function(){var a=this;(e(a,"input")||e(a,"textarea"))&&n(a)},tearDown:function(){var a=this;o(a)}},b},{requires:["./base","dom"]}),KISSY.add("event/delegate",function(a,b,c,d){function g(a,b){if(a.fn===undefined&&a.selector===undefined)return!0;if(a.fn===undefined)return this.selector==a.selector;var c=this.scope||b,d=a.scope||b;return this.fn==a.fn&&this.selector==a.selector&&c==d}function h(a,c){var d=this,e=a.target,f=b.closest(e,[c.selector],d);return j.call(d,f,a,c)}function i(a,c){var d=this,e,f=a.target,g=a.relatedTarget;a.type=c.preType,f=b.closest(f,c.selector,d);if(f&&f!==g&&(!g||!b.contains(f,g))){var h=a.currentTarget;a.currentTarget=f,e=c.fn.call(c.scope||d,a),a.currentTarget=h}return e}function j(a,b,c){var d=this;if(a){var e=b.currentTarget;for(var f=0;f<a.length;f++){b.currentTarget=a[f];var g=c.fn.call(c.scope||d,b);g===!1&&b.halt();if(b.isPropagationStopped)break}b.currentTarget=e}}var e=d.batchForType,f={focus:{type:"focusin"},blur:{type:"focusout"},mouseenter:{type:"mouseover",handler:i},mouseleave:{type:"mouseout",handler:i}};return a.mix(c,{delegate:function(a,d,i,j,k){return e(c,"delegate",a,d,i,j,k)?a:(b.query(a).each(function(a){var b=d,e=h;f[d]&&(d=f[b].type,e=f[b].handler||e),c.on(a,d,e,a,{fn:j,selector:i,preType:b,scope:k,equals:g})}),a)},undelegate:function(a,d,i,j,k){return e(c,"undelegate",a,d,i,j,k)?a:(b.query(a).each(function(a){var b=d,e=h;f[d]&&(d=f[b].type,e=f[b].handler||e),c.remove(a,d,e,a,{fn:j,selector:i,preType:b,scope:k,equals:g})}),a)}}),c},{requires:["dom","./base","./utils"]}),KISSY.add("event/mouseenter",function(a,b,c,d){return d.ie||a.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(d){function e(e){var f=this,g=e.relatedTarget;e.type=d.name;try{if(g&&g!==document&&!g.parentNode)return;g!==f&&(!g||!c.contains(f,g))&&b._handle(f,e)}catch(h){a.log("withinElement error : ","error"),a.log(h,"error")}}b.special[d.name]={setup:function(){b.add(this,d.fix,e)},tearDown:function(){b.remove(this,d.fix,e)}}}),b},{requires:["./base","dom","ua"]}),KISSY.add("event/submit",function(a,b,c,d){var e=document.documentMode;if(b.ie&&(b.ie<9||e&&e<9)){var f=d._nodeName;c.special.submit={setup:function(){var a=this;if(f(a,"form"))return!1;c.on(a,"click keypress",g)},tearDown:function(){var a=this;if(f(a,"form"))return!1;c.remove(a,"click keypress",g),d.query("form",a).each(function(a){a.__submit__fix&&(a.__submit__fix=0,c.remove(a,"submit",h))})}};function g(a){var b=a.target,d=f(b,"input")||f(b,"button")?b.form:null;d&&!d.__submit__fix&&(d.__submit__fix=1,c.on(d,"submit",h))}function h(a){var b=this;b.parentNode&&c.fire(b.parentNode,"submit",a)}}},{requires:["ua","./base","dom"]}),KISSY.add("event/change",function(a,b,c,d){var e=document.documentMode;if(b.ie&&(b.ie<9||e&&e<9)){var f=/^(?:textarea|input|select)$/i;function g(a){return f.test(a.nodeName)}function h(a){var b=a.type;return b=="checkbox"||b=="radio"}c.special.change={setup:function(){var a=this;if(g(a)){if(!h(a))return!1;c.on(a,"propertychange",i),c.on(a,"click",j)}else c.on(a,"beforeactivate",k)},tearDown:function(){var a=this;if(g(a)){if(!h(a))return!1;c.remove(a,"propertychange",i),c.remove(a,"click",j)}else c.remove(a,"beforeactivate",k),d.query("textarea,input,select",a).each(function(a){a.__changeHandler&&(a.__changeHandler=0,c.remove(a,"change",l))})}};function i(a){a.originalEvent.propertyName=="checked"&&(this.__changed=1)}function j(a){this.__changed&&(this.__changed=0,c.fire(this,"change",a))}function k(a){var b=a.target;g(b)&&!b.__changeHandler&&(b.__changeHandler=1,c.on(b,"change",l))}function l(a){var b=this;if(h(b))return;var d;(d=b.parentNode)&&c.fire(d,"change",a)}}},{requires:["ua","./base","dom"]}),KISSY.add("event/mousewheel",function(a,b,c,d,e){function j(c){var d,f=this,g,h,i=c.detail;return c.wheelDelta&&(h=c.wheelDelta/120),c.detail&&(h=-(i%3==0?i/3:i)),c.axis!==undefined&&(c.axis===c.HORIZONTAL_AXIS?(g=0,d=-1*h):c.axis===c.VERTICAL_AXIS&&(d=0,g=h)),c.wheelDeltaY!==undefined&&(g=c.wheelDeltaY/120),c.wheelDeltaX!==undefined&&(d=-1*c.wheelDeltaX/120),!d&&!g&&(g=h),c=new e(f,c),a.mix(c,{deltaY:g,delta:h,deltaX:d,type:"mousewheel"}),b._handle(f,c)}var f=c.gecko?"DOMMouseScroll":"mousewheel",g=d.simpleRemove,h=d.simpleAdd,i="mousewheelHandler";b.special.mousewheel={setup:function(){var c=this,d,e=b._data(c);d=e[d]=a.bind(j,c),h(this,f,d)},tearDown:function(){var a=this,c,d=b._data(a);c=d[c],g(this,f,c),delete d[c]}}},{requires:["./base","ua","./utils","./object"]}),KISSY.add("event",function(a,b,c,d,e){return c.KeyCodes=b,c.Target=d,c.Object=e,c},{requires:["event/keycodes","event/base","event/target","event/object","event/focusin","event/hashchange","event/valuechange","event/delegate","event/mouseenter","event/submit","event/change","event/mousewheel"]}),KISSY.add("node/base",function(a,b,c){function g(h,i,j){var k=this,l;if(k instanceof g){if(!h)return c;if(a.isString(h)){l=b.create(h,i,j);if(l.nodeType===b.DOCUMENT_FRAGMENT_NODE)return d.push.apply(this,e(l.childNodes)),c}else{if(a.isArray(h)||f(h))return d.push.apply(this,e(h)),c;l=h}return k[0]=l,k.length=1,c}return new g(h,i,j)}var d=Array.prototype,e=a.makeArray,f=b._isNodeList;return a.augment(g,{length:0,item:function(b){var c=this;return a.isNumber(b)?b>=c.length?null:new g(c[b]):new g(b)},add:function(b,e,f){a.isNumber(e)&&(f=e,e=c);var h=g.all(b,e).getDOMNodes(),i=new g(this);if(f===c)d.push.apply(i,h);else{var j=[f,0];j.push.apply(j,h),d.splice.apply(i,j)}return i},slice:function(a,b){return new g(d.slice.call(this,a,b))},getDOMNodes:function(){return d.slice.call(this)},each:function(b,c){var d=this;return a.each(d,function(a,e){return a=new g(a),b.call(c||a,a,e,d)}),d},getDOMNode:function(){return this[0]},end:function(){var a=this;return a.__parent||a},all:function(a){var b,c=this;return c.length>0?b=g.all(a,c):b=new g,b.__parent=c,b},one:function(a){var b=this,c=b.all(a),d=c.length?c.slice(0,1):null;return d&&(d.__parent=b),d}}),a.mix(g,{all:function(d,e){return a.isString(d)&&(d=a.trim(d))&&d.length>=3&&a.startsWith(d,"<")&&a.endsWith(d,">")?(e&&(e.getDOMNode&&(e=e.getDOMNode()),e.ownerDocument&&(e=e.ownerDocument)),new g(d,c,e)):new g(b.query(d,e))},one:function(a,b){var c=g.all(a,b);return c.length?c.slice(0,1):null}}),a.mix(g,b._NODE_TYPE),g},{requires:["dom"]}),KISSY.add("node/attach",function(a,b,c,d,e){function l(a,c,d){d.unshift(c);var f=b[a].apply(b,d);return f===e?c:f}function m(a,c,f){f.unshift(c);var g=b[a].apply(b,f);return g===e?c:g===null?null:new d(g)}function n(c,d,f,g){return g[f]===e&&!a.isObject(g[0])?(g.unshift(d),b[c].apply(b,g)):l(c,d,g)}var f=d.prototype,g=a.makeArray,h=["equals","contains","scrollTop","scrollLeft","height","width","innerHeight","innerWidth","outerHeight","outerWidth","addStyleSheet","appendTo","prependTo","insertBefore","before","after","insertAfter","test","hasClass","addClass","removeClass","replaceClass","toggleClass","removeAttr","hasAttr","hasProp","scrollIntoView","remove","empty","removeData","hasData","unselectable"],i=["filter","first","parent","closest","next","prev","clone","siblings","children"],j={attr:1,text:0,css:1,style:1,val:0,prop:1,offset:0,html:0,data:1},k=["on","detach","fire","delegate","undelegate"];a.each(h,function(a){f[a]=function(){var b=g(arguments);return l(a,this,b)}}),a.each(i,function(a){f[a]=function(){var b=g(arguments);return m(a,this,b)}}),a.each(j,function(a,b){f[b]=function(){var c=g(arguments);return n(b,this,a,c)}}),a.each(k,function(a){f[a]=function(){var b=this,d=g(arguments);return d.unshift(b),c[a].apply(c,d),b}})},{requires:["dom","event","./base"]}),KISSY.add("node/override",function(a,b,c,d){a.each(["append","prepend","before","after"],function(c){d.prototype[c]=function(d){var e=d,f=this;return a.isString(e)&&(e=b.create(e)),e&&b[c](e,f),f}})},{requires:["dom","event","./base","./attach"]}),KISSY.add("anim/easing",function(){var a=Math.PI,b=Math.pow,c=Math.sin,d=1.70158,e={swing:function(b){return-Math.cos(b*a)/2+.5},easeNone:function(a){return a},easeIn:function(a){return a*a},easeOut:function(a){return(2-a)*a},easeBoth:function(a){return(a*=2)<1?.5*a*a:.5*(1- --a*(a-2))},easeInStrong:function(a){return a*a*a*a},easeOutStrong:function(a){return 1- --a*a*a*a},easeBothStrong:function(a){return(a*=2)<1?.5*a*a*a*a:.5*(2-(a-=2)*a*a*a)},elasticIn:function(d){var e=.3,f=e/4;return d===0||d===1?d:-(b(2,10*(d-=1))*c((d-f)*2*a/e))},elasticOut:function(d){var e=.3,f=e/4;return d===0||d===1?d:b(2,-10*d)*c((d-f)*2*a/e)+1},elasticBoth:function(d){var e=.45,f=e/4;return d===0||(d*=2)===2?d:d<1?-0.5*b(2,10*(d-=1))*c((d-f)*2*a/e):b(2,-10*(d-=1))*c((d-f)*2*a/e)*.5+1},backIn:function(a){return a===1&&(a-=.001),a*a*((d+1)*a-d)},backOut:function(a){return(a-=1)*a*((d+1)*a+d)+1},backBoth:function(a){return(a*=2)<1?.5*a*a*(((d*=1.525)+1)*a-d):.5*((a-=2)*a*(((d*=1.525)+1)*a+d)+2)},bounceIn:function(a){return 1-e.bounceOut(1-a)},bounceOut:function(a){var b=7.5625,c;return a<1/2.75?c=b*a*a:a<2/2.75?c=b*(a-=1.5/2.75)*a+.75:a<2.5/2.75?c=b*(a-=2.25/2.75)*a+.9375:c=b*(a-=2.625/2.75)*a+.984375,c},bounceBoth:function(a){return a<.5?e.bounceIn(a*2)*.5:e.bounceOut(a*2-1)*.5+.5}};return e.NativeTimeFunction={easeNone:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeBoth:"ease-in-out",easeInStrong:"cubic-bezier(0.9, 0.0, 0.9, 0.5)",easeOutStrong:"cubic-bezier(0.1, 0.5, 0.1, 1.0)",easeBothStrong:"cubic-bezier(0.9, 0.0, 0.1, 1.0)"},e}),KISSY.add("anim/manager",function(a){var b=a.stamp;return{interval:15,runnings:{},timer:null,start:function(a){var c=this,d=b(a);if(c.runnings[d])return;c.runnings[d]=a,c.startTimer()},stop:function(a){this.notRun(a)},notRun:function(c){var d=this,e=b(c);delete d.runnings[e],a.isEmptyObject(d.runnings)&&d.stopTimer()},pause:function(a){this.notRun(a)},resume:function(a){this.start(a)},startTimer:function(){var a=this;a.timer||(a.timer=setTimeout(function(){a.runFrames()?a.stopTimer():(a.timer=0,a.startTimer())},a.interval))},stopTimer:function(){var a=this,b=a.timer;b&&(clearTimeout(b),a.timer=0)},runFrames:function(){var a=this,b=1,c=a.runnings;for(var d in c)c.hasOwnProperty(d)&&(b=0,c[d]._frame());return b}}}),KISSY.add("anim/fx",function(a,b,c){function d(a){this.load(a)}function e(a,d){return!!a.style&&a.style[d]!=null||b.attr(a,d,c,1)==null?0:1}return a.augment(d,{load:function(b){var c=this;a.mix(c,b),c.startTime=a.now(),c.pos=0,c.unit=c.unit||""},frame:function(b){var c=this,d=0,e,f=a.now();return b||f>=c.duration+c.startTime?(c.pos=1,d=1):(e=f-c.startTime,c.pos=c.easing(e/c.duration)),c.update(),d},interpolate:function(b,d,e){return a.isNumber(b)&&a.isNumber(d)?(b+(d-b)*e).toFixed(3):c},update:function(){var d=this,f=d.prop,g=d.elem,h=d.from,i=d.to,j=d.interpolate(h,i,d.pos);j===c?d.finished||(d.finished=1,b.css(g,f,i),a.log(d.prop+" update directly ! : "+j+" : "+h+" : "+i)):(j+=d.unit,e(g,f)?b.attr(g,f,j,1):b.css(g,f,j))},cur:function(){var a=this,d=a.prop,f=a.elem;if(e(f,d))return b.attr(f,d,c,1);var g,h=b.css(f,d);return isNaN(g=parseFloat(h))?!h||h==="auto"?0:h:g}}),d.Factories={},d.getFx=function(a){var b=d.Factories[a.prop]||d;return new b(a)},d},{requires:["dom"]}),KISSY.add("anim/queue",function(a,b){function f(a,e,f){e=e||d;var g,h=b.data(a,c);return!h&&!f&&b.data(a,c,h={}),h&&(g=h[e],!g&&!f&&(g=h[e]=[])),g}function g(e,f){f=f||d;var g=b.data(e,c);g&&delete g[f],a.isEmptyObject(g)&&b.removeData(e,c)}var c=a.guid("ks-queue-"+a.now()+"-"),d=a.guid("ks-queue-"+a.now()+"-"),e="...",h={queueCollectionKey:c,queue:function(a){var b=a.elem,c=a.config.queue,d=f(b,c);return d.push(a),d[0]!==e&&h.dequeue(a),d},remove:function(b){var c=b.elem,d=b.config.queue,e=f(c,d,1),g;e&&(g=a.indexOf(b,e),g>-1&&e.splice(g,1))},removeQueues:function(a){b.removeData(a,c)},removeQueue:g,dequeue:function(a){var b=a.elem,c=a.config.queue,d=f(b,c,1),h=d&&d.shift();h==e&&(h=d.shift()),h?(d.unshift(e),h._runInternal()):g(b,c)}};return h},{requires:["dom"]}),KISSY.add("anim/base",function(a,b,c,d,e,f,g,h){function o(c,d,e,f,g){var h=this,j;if(!(c=b.get(c)))return;if(!(h instanceof o))return new o(c,d,e,f,g);a.isString(d)?d=a.unparam(d,";",":"):d=a.clone(d);for(var k in d){var l=i(a.trim(k));k!=l&&(d[l]=d[k],delete d[k])}a.isPlainObject(e)?j=a.clone(e):j={duration:parseFloat(e)||undefined,easing:f,complete:g},j=a.merge(m,j),h.config=j,j.duration*=1e3,h.elem=h.domEl=c,h.props=d,h._backupProps={},h._fxs={},h.on("complete",p)}function p(c){var d=this,e=d._backupProps,f=d.config;a.isEmptyObject(e=d._backupProps)||b.css(d.elem,e),f.complete&&f.complete.call(d,c)}function q(){var c=this,h=c.config,i=c._backupProps,m=c.elem,o,p,q,r=h.specialEasing||{},t=c._fxs,u=c.props;s(c);if(c.fire("start")===!1){c.stop(0);return}if(j(m)){o=b.css(m,"display")=="none";for(q in u){p=u[q];if(p=="hide"&&o||p=="show"&&!o){c.stop(1);return}}}a.each(u,function(b,c){if(!u.hasOwnProperty(c))return;var e;a.isArray(b)?(e=r[c]=b[1],u[c]=b[0]):e=r[c]=r[c]||h.easing,a.isString(e)&&(e=r[c]=d[e]),r[c]=e||d.easeNone}),a.each(l,function(c,d){var e,f,g;if(g=u[d]){f={},a.each(c,function(a){f[a]=b.css(m,a),r[a]=r[d]}),b.css(m,d,g);for(e in f)u[e]=b.css(m,e),b.css(m,e,f[e]);delete u[d]}});for(q in u){if(!u.hasOwnProperty(q))continue;p=a.trim(u[q]);var v,w,x={elem:m,prop:q,duration:h.duration,easing:r[q]},y=g.getFx(x);a.inArray(p,k)?(i[q]=b.style(m,q),p=="toggle"&&(p=o?"show":"hide"),p=="hide"?(v=0,w=y.cur(),i.display="none"):(w=0,v=y.cur(),b.css(m,q,w),b.show(m)),p=v):(v=p,w=y.cur()),p+="";var z="",A=p.match(n);A&&(v=parseFloat(A[2]),z=A[3],z&&z!=="px"&&(b.css(m,q,p),w=v/y.cur()*w,b.css(m,q,w+z)),A[1]&&(v=(A[1]==="-="?-1:1)*v+w)),x.from=w,x.to=v,x.unit=z,y.load(x),t[q]=y}j(m)&&(u.width||u.height)&&(a.mix(i,{overflow:b.style(m,"overflow"),"overflow-x":b.style(m,"overflowX"),"overflow-y":b.style(m,"overflowY")}),b.css(m,"overflow","hidden"),b.css(m,"display")==="inline"&&b.css(m,"float")==="none"&&(e.ie?b.css(m,"zoom",1):b.css(m,"display","inline-block"))),f.start(c)}function s(c){var d=c.elem,e=b.data(d,r);e||b.data(d,r,e={}),e[a.stamp(c)]=c}function t(c){var d=c.elem,e=b.data(d,r);e&&(delete e[a.stamp(c)],a.isEmptyObject(e)&&b.removeData(d,r))}function u(c){var d=c.elem,e=b.data(d,r);return e?!!e[a.stamp(c)]:0}function v(c,d,e,f){e&&f!==!1&&h.removeQueue(c,f);var g=b.data(c,r),i=a.merge(g);for(var j in i){var k=i[j];k.config.queue==f&&k.stop(d)}}var i=b._camelCase,j=b._isElementNode,k=["hide","show","toggle"],l={border:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],borderBottom:["borderBottomWidth"],borderLeft:["borderLeftWidth"],borderTop:["borderTopWidth"],borderRight:["borderRightWidth"],font:["fontSize","fontWeight"],margin:["marginBottom","marginLeft","marginRight","marginTop"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"]},m={duration:1,easing:"easeNone"},n=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i;o.SHORT_HANDS=l,a.augment(o,c.Target,{isRunning:function(){return u(this)},_runInternal:q,run:function(){var a=this,b=a.config.queue;return b===!1?q.call(a):h.queue(a),a},_frame:function(){var a=this,b,c=1,d=a._fxs;for(b in d)d.hasOwnProperty(b)&&(c&=d[b].frame());(a.fire("step")===!1||c)&&a.stop(c)},stop:function(a){var b=this,c=b.config,d=c.queue,e,g=b._fxs;if(!b.isRunning()){d!==!1&&h.remove(b);return}if(a){for(e in g)g.hasOwnProperty(e)&&g[e].frame(1);b.fire("complete")}return f.stop(b),t(b),d!==!1&&h.dequeue(b),b}});var r=a.guid("ks-anim-unqueued-"+a.now()+"-");return o.stop=function(c,d,e,f){if(f===null||a.isString(f)||f===!1)return v.apply(undefined,arguments);e&&h.removeQueues(c);var g=b.data(c,r),i=a.merge(g);for(var j in i)i[j].stop(d)},o.isRunning=function(c){var d=b.data(c,r);return d&&!a.isEmptyObject(d)},o.Q=h,!l,o},{requires:["dom","event","./easing","ua","./manager","./fx","./queue"]}),KISSY.add("anim/color",function(a,b,c,d){function m(b){b+="";var c;if(c=b.match(h))return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])];if(c=b.match(i))return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3]),parseInt(c[4])];if(c=b.match(j)){for(var d=1;d<c.length;d++)c[d].length<2&&(c[d]+=c[d]);return[parseInt(c[1],e),parseInt(c[2],e),parseInt(c[3],e)]}return g[b=b.toLowerCase()]?g[b]:(a.log("only allow rgb or hex color string : "+b,"warn"),[255,255,255])}function n(){n.superclass.constructor.apply(this,arguments)}var e=16,f=Math.floor,g={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255]},h=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,i=/^rgba\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+),\s*([0-9]+)\)$/i,j=/^#?([0-9A-F]{1,2})([0-9A-F]{1,2})([0-9A-F]{1,2})$/i,k=c.SHORT_HANDS,l=["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"];return k.background=["backgroundColor"],k.borderColor=["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"],k.border.push("borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"),k.borderBottom.push("borderBottomColor"),k.borderLeft.push("borderLeftColor"),k.borderRight.push("borderRightColor"),k.borderTop.push("borderTopColor"),a.extend(n,d,{load:function(){var a=this;n.superclass.load.apply(a,arguments),a.from&&(a.from=m(a.from)),a.to&&(a.to=m(a.to))},interpolate:function(b,c,d){var e=n.superclass.interpolate;if(b.length==3&&c.length==3)return"rgb("+[f(e(b[0],c[0],d)),f(e(b[1],c[1],d)),f(e(b[2],c[2],d))].join(", ")+")";if(b.length==4||c.length==4)return"rgba("+[f(e(b[0],c[0],d)),f(e(b[1],c[1],d)),f(e(b[2],c[2],d)),f(e(b[3]||1,c[3]||1,d))].join(", ")+")";a.log("anim/color unknown value : "+b)}}),a.each(l,function(a){d.Factories[a]=n}),n},{requires:["dom","./base","./fx"]}),KISSY.add("anim",function(a,b,c){return b.Easing=c,b},{requires:["anim/base","anim/easing","anim/color"]}),KISSY.add("node/anim",function(a,b,c,d,e){function g(a,b,c){var d=[],e={};for(var g=c||0;g<b;g++)d.push.apply(d,f[g]);for(g=0;g<d.length;g++)e[d[g]]=a;return e}var f=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];a.augment(d,{animate:function(){var b=this,d=a.makeArray(arguments);return a.each(b,function(a){c.apply(e,[a].concat(d)).run()}),b},stop:function(b,d,e){var f=this;return a.each(f,function(a){c.stop(a,b,d,e)}),f},isRunning:function(){var a=this;for(var b=0;b<a.length;b++)if(c.isRunning(a[b]))return 1;return 0}}),a.each({show:g("show",3),hide:g("hide",3),toggle:g("toggle",3),fadeIn:g("show",3,2),fadeOut:g("hide",3,2),fadeToggle:g("toggle",3,2),slideDown:g("show",1),slideUp:g("hide",1),slideToggle:g("toggle",1)},function(e,f){d.prototype[f]=function(d,g,h){var i=this;return b[f]&&!d?b[f](i):a.each(i,function(a){c(a,e,d,h||"easeOut",g).run()}),i}})},{requires:["dom","anim","./base"]}),KISSY.add("node",function(a,b,c){return c.KeyCodes=b.KeyCodes,c},{requires:["event","node/base","node/attach","node/override","node/anim"]}),KISSY.add("json/json2",function(S,UA){function f(a){return a<10?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return typeof b=="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g=gap,h,i=b[a];i&&typeof i=="object"&&typeof i.toJSON=="function"&&(i=i.toJSON(a)),typeof rep=="function"&&(i=rep.call(b,a,i));switch(typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";gap+=indent,h=[];if(Object.prototype.toString.apply(i)==="[object Array]"){f=i.length;for(c=0;c<f;c+=1)h[c]=str(c,i)||"null";return e=h.length===0?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]",gap=g,e}if(rep&&typeof rep=="object"){f=rep.length;for(c=0;c<f;c+=1)d=rep[c],typeof d=="string"&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e))}else for(d in i)Object.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));return e=h.length===0?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}",gap=g,e}}var win=window,JSON=win.JSON;if(!JSON||UA.ie<9)JSON=win.JSON={};typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;return typeof JSON.stringify!="function"&&(JSON.stringify=function(a,b,c){var d;gap="",indent="";if(typeof c=="number")for(d=0;d<c;d+=1)indent+=" ";else typeof c=="string"&&(indent=c);rep=b;if(!b||typeof b=="function"||typeof b=="object"&&typeof b.length=="number")return str("",{"":a});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&typeof e=="object")for(c in e)Object.hasOwnProperty.call(e,c)&&(d=walk(e,c),d!==undefined?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}),JSON},{requires:["ua"]}),KISSY.add("json",function(a,b){return{parse:function(c){return a.isNullOrUndefined(c)||c===""?null:b.parse(c)},stringify:b.stringify}},{requires:["json/json2"]}),KISSY.add("ajax/form-serializer",function(a,b){var c=/^(?:select|textarea)/i,d=/\r?\n/g,e=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i;return{serialize:function(f){var g=[],h={};return b.query(f).each(function(b){var c=b.elements?a.makeArray(b.elements):[b];g.push.apply(g,c)}),g=a.filter(g,function(a){return a.name&&!a.disabled&&(a.checked||c.test(a.nodeName)||e.test(a.type))}),a.each(g,function(c){var e=b.val(c),f;e=a.map(a.makeArray(e),function(a){return a.replace(d,"\r\n")}),f=h[c.name]=h[c.name]||[],f.push.apply(f,e)}),a.param(h,undefined,undefined,!1)}}},{
requires:["dom"]}),KISSY.add("ajax/xhrobject",function(a,b){function g(b){var c=b.responseText,d=b.responseXML,e=b.config,f=e.converters,g=b.converters||{},h,i,j=e.contents,k=e.dataType;if(c||d){var l=b.mimeType||b.getResponseHeader("Content-Type");while(k[0]=="*")k.shift();if(!k.length)for(h in j)if(j[h].test(l)){k[0]!=h&&k.unshift(h);break}k[0]=k[0]||"text",k[0]=="text"&&c!==undefined?i=c:k[0]=="xml"&&d!==undefined?i=d:a.each(["text","xml"],function(a){var b=k[0],e=g[a]&&g[a][b]||f[a]&&f[a][b];if(e)return k.unshift(a),i=a=="text"?c:d,!1})}var m=k[0];for(var n=1;n<k.length;n++){h=k[n];var o=g[m]&&g[m][h]||f[m]&&f[m][h];if(!o)throw"no covert for "+m+" => "+h;i=o(i),m=h}b.responseData=i}function h(b){a.mix(this,{responseData:null,config:b||{},timeoutTimer:null,responseText:null,responseXML:null,responseHeadersString:"",responseHeaders:null,requestHeaders:{},readyState:0,state:0,statusText:null,status:0,transport:null})}var c=200,d=300,e=304,f=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg;return a.augment(h,b.Target,{setRequestHeader:function(a,b){return this.requestHeaders[a]=b,this},getAllResponseHeaders:function(){return this.state===2?this.responseHeadersString:null},getResponseHeader:function(a){var b;if(this.state===2){if(!this.responseHeaders){this.responseHeaders={};while(b=f.exec(this.responseHeadersString))this.responseHeaders[b[1]]=b[2]}b=this.responseHeaders[a]}return b===undefined?null:b},overrideMimeType:function(a){return this.state||(this.mimeType=a),this},abort:function(a){return a=a||"abort",this.transport&&this.transport.abort(a),this.callback(0,a),this},callback:function(a,b){var f=this;if(f.state==2)return;f.state=2,f.readyState=4;var h;if(a>=c&&a<d||a==e)if(a==e)b="notmodified",h=!0;else try{g(f),b="success",h=!0}catch(i){b="parsererror : "+i}else a<0&&(a=0);f.status=a,f.statusText=b,h?f.fire("success"):f.fire("error"),f.fire("complete"),f.transport=undefined}}),h},{requires:["event"]}),KISSY.add("ajax/base",function(a,b,c,d){function r(b){b=a.mix(a.clone(q),b||{},undefined,undefined,!0);if(!a.isBoolean(b.crossDomain)){var c=g.exec(b.url.toLowerCase());b.crossDomain=!(!c||c[1]==m[1]&&c[2]==m[2]&&(c[3]||(c[1]==="http:"?i:j))==(m[3]||(m[1]==="http:"?i:j)))}return b.processData&&b.data&&!a.isString(b.data)&&(b.data=a.param(b.data,undefined,undefined,b.serializeArray)),b.type=b.type.toUpperCase(),b.hasContent=!k.test(b.type),b.hasContent||(b.data&&(b.url+=(/\?/.test(b.url)?"&":"?")+b.data),b.cache===!1&&(b.url+=(/\?/.test(b.url)?"&":"?")+"_ksTS="+(a.now()+"_"+a.guid()))),b.dataType=a.trim(b.dataType||"*").split(f),b.context=b.context||b,b}function s(a,b){u.fire(a,{ajaxConfig:b.config,xhr:b})}function t(a){var b=this,c=b.config,d=a.type;this.timeoutTimer&&clearTimeout(this.timeoutTimer),c[d]&&c[d].call(c.context,b.responseData,b.statusText,b),s(d,b)}function u(b){if(!b.url)return undefined;b=r(b);var c=new d(b);s("start",c);var e=p[b.dataType[0]]||p["*"],f=new e(c);c.transport=f,b.contentType&&c.setRequestHeader("Content-Type",b.contentType);var g=b.dataType[0],h=b.accepts;c.setRequestHeader("Accept",g&&h[g]?h[g]+(g==="*"?"":", */*; q=0.01"):h["*"]);for(var i in b.headers)c.setRequestHeader(i,b.headers[i]);c.on("complete success error",t),c.readyState=1,s("send",c),b.async&&b.timeout>0&&(c.timeoutTimer=setTimeout(function(){c.abort("timeout")},b.timeout*1e3));try{c.state=1,f.send()}catch(j){c.status<2?c.callback(-1,j):a.error(j)}return c}var e=/^(?:about|app|app\-storage|.+\-extension|file|widget):$/,f=/\s+/,g=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,h=function(a){return a},i=80,j=443,k=/^(?:GET|HEAD)$/,l,m;try{l=location.href}catch(n){a.log("ajax/base get curLocation error : "),a.log(n),l=document.createElement("a"),l.href="",l=l.href}m=g.exec(l);var o=e.test(m[1]),p={},q={type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",async:!0,serializeArray:!0,processData:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},converters:{text:{json:b.parse,html:h,text:h,xml:a.parseXML}},contents:{xml:/xml/,html:/html/,json:/json/}};return q.converters.html=q.converters.text,a.mix(u,c.Target),a.mix(u,{isLocal:o,setupConfig:function(b){a.mix(q,b,undefined,undefined,!0)},setupTransport:function(a,b){p[a]=b},getTransport:function(a){return p[a]},getConfig:function(){return q}}),u},{requires:["json","event","./xhrobject"]}),KISSY.add("ajax/xhrbase",function(a,b){function j(a,b){try{return new(b||d).XMLHttpRequest}catch(c){}return undefined}function k(b,c){try{return new(c||d).ActiveXObject("Microsoft.XMLHTTP")}catch(e){a.log("createActiveXHR error")}return undefined}function l(a){return e&&a instanceof e}var c=200,d=window,e=d.XDomainRequest,f=204,g=404,h=1223,i={proto:{}};return i.xhr=d.ActiveXObject?function(a,c){return a&&e?new e:!b.isLocal&&j(a,c)||k(a,c)}:j,a.mix(i.proto,{sendInternal:function(){var b=this,c=b.xhrObj,d=c.config,e=b.xhr,f,g;d.username?e.open(d.type,d.url,d.async,d.username,d.password):e.open(d.type,d.url,d.async);if(f=d.xhrFields)for(g in f)e[g]=f[g];c.mimeType&&e.overrideMimeType&&e.overrideMimeType(c.mimeType),!d.crossDomain&&!c.requestHeaders["X-Requested-With"]&&(c.requestHeaders["X-Requested-With"]="XMLHttpRequest");try{if(!d.crossDomain)for(g in c.requestHeaders)e.setRequestHeader(g,c.requestHeaders[g])}catch(h){a.log("setRequestHeader in xhr error : "),a.log(h)}e.send(d.hasContent&&d.data||null),!d.async||e.readyState==4?b._callback():l(e)?(e.onload=function(){e.readyState=4,e.status=200,b._callback()},e.onerror=function(){e.readyState=4,e.status=500,b._callback()}):e.onreadystatechange=function(){b._callback()}},abort:function(){this._callback(0,1)},_callback:function(d,e){try{var i=this,j=i.xhr,k=i.xhrObj,m=k.config;if(e||j.readyState==4){l(j)?(j.onerror=a.noop,j.onload=a.noop):j.onreadystatechange=a.noop;if(e)j.readyState!==4&&j.abort();else{var n=j.status;l(j)||(k.responseHeadersString=j.getAllResponseHeaders());var o=j.responseXML;o&&o.documentElement&&(k.responseXML=o),k.responseText=j.responseText;try{var p=j.statusText}catch(q){a.log("xhr statustext error : "),a.log(q),p=""}!n&&b.isLocal&&!m.crossDomain?n=k.responseText?c:g:n===h&&(n=f),k.callback(n,p)}}}catch(r){j.onreadystatechange=a.noop,e||k.callback(-1,r)}}}),i},{requires:["./base"]}),KISSY.add("ajax/subdomain",function(a,b,c,d){function i(a){var b=this,c=a.config;b.xhrObj=a;var d=c.url.match(e);b.__hostname=d[2],b.__protocol=d[1],c.crossDomain=!1}function j(){var a=this,b=a.__hostname,d=h[b];d.ready=1,c.detach(d.iframe,"load",j,a),a.send()}var e=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,f="/sub_domain_proxy.html",g=document,h={};return a.augment(i,b.proto,{send:function(){var e=this,i=e.xhrObj.config,k=e.__hostname,l,m=h[k],n=f;i.xdr&&i.xdr.subDomain&&i.xdr.subDomain.proxy&&(n=i.xdr.subDomain.proxy);if(m&&m.ready){e.xhr=b.xhr(0,m.iframe.contentWindow),e.xhr?e.sendInternal():a.error("document.domain not set correctly!");return}m?l=m.iframe:(m=h[k]={},l=m.iframe=document.createElement("iframe"),d.css(l,{position:"absolute",left:"-9999px",top:"-9999px"}),d.prepend(l,g.body||g.documentElement),l.src=e.__protocol+"//"+k+n),c.on(l,"load",j,e)}}),i},{requires:["./xhrbase","event","dom"]}),KISSY.add("ajax/xdr",function(a,b,c){function i(a,b,d){if(h)return;h=!0;var f='<object id="'+e+'" type="application/x-shockwave-flash" data="'+a+'" width="0" height="0">'+'<param name="movie" value="'+a+'" />'+'<param name="FlashVars" value="yid='+b+"&uid="+d+'&host=KISSY.io" />'+'<param name="allowScriptAccess" value="always" />'+"</object>",i=g.createElement("div");c.prepend(i,g.body||g.documentElement),i.innerHTML=f}function j(b){a.log("use flash xdr"),this.xhrObj=b}var d={},e="io_swf",f,g=document,h=!1;return a.augment(j,{send:function(){var b=this,c=b.xhrObj,e=c.config,g=e.xdr||{};i(g.src||a.Config.base+"ajax/io.swf",1,1);if(!f){setTimeout(function(){b.send()},200);return}b._uid=a.guid(),d[b._uid]=b,f.send(e.url,{id:b._uid,uid:b._uid,method:e.type,data:e.hasContent&&e.data||{}})},abort:function(){f.abort(this._uid)},_xdrResponse:function(a,b){var c=this,e,f=c.xhrObj;f.responseText=decodeURI(b.c.responseText);switch(a){case"success":e={status:200,statusText:"success"},delete d[b.id];break;case"abort":delete d[b.id];break;case"timeout":case"transport error":case"failure":delete d[b.id],e={status:500,statusText:a}}e&&f.callback(e.status,e.statusText)}}),b.applyTo=function(b,c,d){var e=c.split("."),f=a;a.each(e,function(a){f=f[a]}),f.apply(null,d)},b.xdrReady=function(){f=g.getElementById(e)},b.xdrResponse=function(a,b,c){var e=d[b.uid];e&&e._xdrResponse(a,b,c)},a.io=b,j},{requires:["./base","dom"]}),KISSY.add("ajax/xhr",function(a,b,c,d,e){var f=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,g=window.XDomainRequest,h=c.xhr();if(h){function i(a){var b=a.split(".");return b.length<2?b.join("."):b.reverse().slice(0,2).reverse().join(".")}function j(a){var b=a.config,c=b.xdr||{};if(b.crossDomain){var j=b.url.match(f);if(i(location.hostname)==i(j[2]))return new d(a);if(!("withCredentials"in h)&&(String(c.use)==="flash"||!g))return new e(a)}return this.xhrObj=a,undefined}a.augment(j,c.proto,{send:function(){var a=this,b=a.xhrObj,d=b.config;a.xhr=c.xhr(d.crossDomain),a.sendInternal()}}),b.setupTransport("*",j)}return b},{requires:["./base","./xhrbase","./subdomain","./xdr"]}),KISSY.add("ajax/script",function(a,b){function f(a){return!a.config.crossDomain&&!a.config.forceScript?new(b.getTransport("*"))(a):(this.xhrObj=a,0)}var c=document,d=200,e=500;return b.setupConfig({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{text:{script:function(b){return a.globalEval(b),b}}}}),a.augment(f,{send:function(){var a=this,b,d=this.xhrObj,e=d.config,f=c.head||c.getElementsByTagName("head")[0]||c.documentElement;a.head=f,b=c.createElement("script"),a.script=b,b.async="async",e.scriptCharset&&(b.charset=e.scriptCharset),b.src=e.url,b.onerror=b.onload=b.onreadystatechange=function(b){b=b||window.event,a._callback((b.type||"error").toLowerCase())},f.insertBefore(b,f.firstChild)},_callback:function(a,b){var c=this.script,f=this.xhrObj,g=this.head;if(!c)return;if(b||!c.readyState||/loaded|complete/.test(c.readyState)||a=="error")c.onerror=c.onload=c.onreadystatechange=null,g&&c.parentNode&&g.removeChild(c),this.script=undefined,this.head=undefined,!b&&a!="error"?f.callback(d,"success"):a=="error"&&f.callback(e,"scripterror")},abort:function(){this._callback(0,1)}}),b.setupTransport("script",f),b},{requires:["./base","./xhr"]}),KISSY.add("ajax/jsonp",function(a,b){return b.setupConfig({jsonp:"callback",jsonpCallback:function(){return a.guid("jsonp")}}),b.on("start",function(b){var c=b.xhr,d=c.config;if(d.dataType[0]=="jsonp"){var e,f=d.jsonpCallback,g=a.isFunction(f)?f():f,h=window[g];d.url+=(/\?/.test(d.url)?"&":"?")+d.jsonp+"="+g,window[g]=function(b){arguments.length>1&&(b=a.makeArray(arguments)),e=[b]},c.on("complete",function(){window[g]=h;if(h===undefined)try{delete window[g]}catch(a){}else e&&h(e[0])}),c.converters=c.converters||{},c.converters.script=c.converters.script||{},c.converters.script.json=function(){return e||a.error(" not call jsonpCallback : "+g),e[0]},d.dataType.length=2,d.dataType[0]="script",d.dataType[1]="json"}}),b},{requires:["./base"]}),KISSY.add("ajax/form",function(a,b,c,d){return b.on("start",function(a){var b=a.xhr,e=b.config;if(e.form){var f=c.get(e.form),g=f.encoding||f.enctype;if(g.toLowerCase()!="multipart/form-data"){var h=d.serialize(f);h&&(e.hasContent?(e.data=e.data||"",e.data&&(e.data+="&"),e.data+=h):e.url+=(/\?/.test(e.url)?"&":"?")+h)}else{var i=e.dataType[0];i=="*"&&(i="text"),e.dataType.length=2,e.dataType[0]="iframe",e.dataType[1]=i}}}),b},{requires:["./base","dom","./form-serializer"]}),KISSY.add("ajax/iframe-upload",function(a,b,c,d){function i(c){var d=a.guid("ajax-iframe");c.iframe=b.create("<iframe  id='"+d+"'"+" name='"+d+"'"+" style='position:absolute;left:-9999px;top:-9999px;'/>"),c.iframeId=d,b.prepend(c.iframe,e.body||e.documentElement)}function j(c,d,f){c=a.unparam(c);var g=[];for(var h in c){var i=a.isArray(c[h]),j=a.makeArray(c[h]);for(var k=0;k<j.length;k++){var l=e.createElement("input");l.type="hidden",l.name=h+(i&&f?"[]":""),l.value=j[k],b.append(l,d),g.push(l)}}return g}function k(a){b.remove(a)}function l(a){this.xhr=a}var e=document,f=200,g=500,h=30;return d.setupConfig({converters:{iframe:d.getConfig().converters.text,text:{iframe:function(a){return a}}}}),a.augment(l,{send:function(){var a=this.xhr,d=a.config,e,f=b.get(d.form);this.attrs={target:b.attr(f,"target")||"",action:b.attr(f,"action")||""},this.form=f,i(a),b.attr(f,{target:a.iframeId,action:d.url}),d.data&&(e=j(d.data,f,d.serializeArray)),this.fields=e;var g=a.iframe;c.on(g,"load error",this._callback,this),f.submit()},_callback:function(a){var d=this.form,e=this.xhr,i=a.type,j=e.iframe;if(!j)return;b.attr(d,this.attrs);if(i=="load"){var l=j.contentWindow.document;e.responseXML=l,e.responseText=b.text(l.body),e.callback(f,"success")}else i=="error"&&e.callback(g,"error");k(this.fields),c.detach(j),setTimeout(function(){b.remove(j)},h),e.iframe=null},abort:function(){this._callback(0,1)}}),d.setupTransport("iframe",l),d},{requires:["dom","event","./base"]}),KISSY.add("ajax",function(a,b,c){var d=undefined;return a.mix(c,{serialize:b.serialize,get:function(b,e,f,g,h){return a.isFunction(e)&&(g=f,f=e,e=d),c({type:h||"get",url:b,data:e,success:f,dataType:g})},post:function(b,e,f,g){return a.isFunction(e)&&(g=f,f=e,e=d),c.get(b,e,f,g,"post")},jsonp:function(b,e,f){return a.isFunction(e)&&(f=e,e=d),c.get(b,e,f,"jsonp")},getScript:a.getScript,getJSON:function(b,e,f){return a.isFunction(e)&&(f=e,e=d),c.get(b,e,f,"json")},upload:function(b,e,f,g,h){return a.isFunction(f)&&(h=g,g=f,f=d),c({url:b,type:"post",dataType:h,form:e,data:f,success:g})}}),c},{requires:["ajax/form-serializer","ajax/base","ajax/xhrobject","ajax/xhr","ajax/script","ajax/jsonp","ajax/form","ajax/iframe-upload"]}),KISSY.add("base/attribute",function(a,b){function d(b,c){return a.isString(c)?b[c]:c}function e(a,b,c,d,e,f,g){return g=g||c,a.fire(b+m(c)+"Change",{attrName:g,subAttrName:f,prevVal:d,newVal:e})}function f(a,b,c){var d=a[b]||{};return c&&(a[b]=d),d}function g(a){return f(a,"__attrs",!0)}function h(a){return f(a,"__attrVals",!0)}function i(a,c){for(var d=0,e=c.length;a!=b&&d<e;d++)a=a[c[d]];return a}function j(a,c,d){var e=c.length-1,f=a;if(e>=0){for(var g=0;g<e;g++)a=a[c[g]];a!=b?a[c[g]]=d:f=b}return f}function k(b,c,d,f,g){var k;f=f||{};var l=".",m,n,o,p=c;c.indexOf(l)!==-1&&(m=c.split(l),c=m.shift()),o=b.get(c),m&&(n=i(o,m));if(!m&&o===d)return undefined;if(m&&n===d)return undefined;if(m){var q=a.clone(o);j(q,m,d),d=q}return!f.silent&&!1===e(b,"before",c,o,d,p)?!1:(k=b.__set(c,d),k===!1?k:(f.silent||(d=h(b)[c],e(b,"after",c,o,d,p),g?g.push({prevVal:o,newVal:d,attrName:c,subAttrName:p}):e(b,"","*",[o],[d],[p],[c])),b))}function l(){}function m(a){return a.charAt(0).toUpperCase()+a.substring(1)}l.INVALID={};var c=l.INVALID;return a.augment(l,{getAttrs:function(){return g(this)},getAttrVals:function(){var a=this,b={},c,d=g(a);for(c in d)b[c]=a.get(c);return b},addAttr:function(b,c,d){var e=this,f=g(e),h=a.clone(c);return f[b]?a.mix(f[b],h,d):f[b]=h,e},addAttrs:function(b,c){var d=this;return a.each(b,function(a,b){d.addAttr(b,a)}),c&&d.set(c),d},hasAttr:function(a){return a&&g(this).hasOwnProperty(a)},removeAttr:function(a){var b=this;return b.hasAttr(a)&&(delete g(b)[a],delete h(b)[a]),b},set:function(b,c,d){var f,g=this;if(a.isPlainObject(b)){var h=b;b=0,f=!0,d=c;var i=[];for(b in h){f=k(g,b,h[b],d,i);if(f===!1)break}var j=[],l=[],m=[],n=[];return a.each(i,function(a){l.push(a.prevVal),m.push(a.newVal),j.push(a.attrName),n.push(a.subAttrName)}),j.length&&e(g,"","*",l,m,n,j),f}return k(g,b,c,d)},__set:function(a,e){var i=this,j,k=f(g(i),a,!0),l=k.validator,m=k.setter;if(l=d(i,l))if(l.call(i,e,a)===!1)return!1;if(m=d(i,m))j=m.call(i,e,a);if(j===c)return!1;j!==b&&(e=j),h(i)[a]=e},get:function(a){var b=this,c=".",e,j,k,l;a.indexOf(c)!==-1&&(e=a.split(c),a=e.shift()),j=f(g(b),a),k=j.getter,l=a in h(b)?h(b)[a]:b.__getDefAttrVal(a);if(k=d(b,k))l=k.call(b,l,a);return e&&(l=i(l,e)),l},__getDefAttrVal:function(a){var c=this,e=f(g(c),a),h,i;if(h=d(c,e.valueFn))i=h.call(c),i!==b&&(e.value=i),delete e.valueFn,g(c)[a]=e;return e.value},reset:function(b,c){var d=this;if(a.isString(b))return d.hasAttr(b)?d.set(b,d.__getDefAttrVal(b),c):d;c=b;var e=g(d),f={};for(b in e)f[b]=d.__getDefAttrVal(b);return d.set(f,c),d}}),b&&(l.prototype.addAttrs=b),l}),KISSY.add("base/base",function(a,b,c){function d(a){var b=this.constructor;while(b)e(this,b.ATTRS),b=b.superclass?b.superclass.constructor:null;f(this,a)}function e(a,b){if(b)for(var c in b)b.hasOwnProperty(c)&&a.addAttr(c,b[c],!1)}function f(a,b){if(b)for(var c in b)b.hasOwnProperty(c)&&a.__set(c,b[c])}return a.augment(d,c.Target,b),d},{requires:["./attribute","event"]}),KISSY.add("base",function(a,b,c){return b.Attribute=c,b},{requires:["base/base","base/attribute"]}),KISSY.add("cookie/base",function(a){function f(b){return a.isString(b)&&b!==""}var b=document,c=864e5,d=encodeURIComponent,e=decodeURIComponent;return{get:function(a){var c,d;return f(a)&&(d=String(b.cookie).match(new RegExp("(?:^| )"+a+"(?:(?:=([^;]*))|;|$)")))&&(c=d[1]?e(d[1]):""),c},set:function(a,e,g,h,i,j){var k=String(d(e)),l=g;typeof l=="number"&&(l=new Date,l.setTime(l.getTime()+g*c)),l instanceof Date&&(k+="; expires="+l.toUTCString()),f(h)&&(k+="; domain="+h),f(i)&&(k+="; path="+i),j&&(k+="; secure"),b.cookie=a+"="+k},remove:function(a,b,c,d){this.set(a,"",-1,b,c,d)}}}),KISSY.add("cookie",function(a,b){return b},{requires:["cookie/base"]}),KISSY.add("core",function(a,b,c,d,e,f,g,h,i,j){var k={UA:b,DOM:c,Event:d,EventTarget:d.Target,EventObject:d.Object,Node:e,NodeList:e,JSON:f,Ajax:g,IO:g,ajax:g,io:g,jsonp:g.jsonp,Anim:h,Easing:h.Easing,Base:i,Cookie:j,one:e.one,all:e.all,get:c.get,query:c.query};return a.mix(a,k),k},{requires:["ua","dom","event","node","json","ajax","anim","base","cookie"]}),KISSY.add("ajax/diandian",function(a,b){var c={dataType:"json",xdr:{subDomain:{proxy:"/proxy.html"}}};window.DDformKey?(c.data={formKey:window.DDformKey},a.log("FormKey has patched.","info")):a.log("FormKey is not found.","info"),b.setupConfig(c)},{requires:["ajax"]}),KISSY.add("dom/diandian",function(a,b){a.mix(b,{createFragment:function(a,c){var d=document.createDocumentFragment(),e=b.create("<div>"),c=c||!1;b.html(e,a,c);while(e.firstChild)d.appendChild(e.firstChild);return d},appendHtml:function(a,c,d){var d=d||!1,e=b.createFragment(c,d);a.appendChild(e)}})},{requires:["dom"]}),KISSY.use("core");